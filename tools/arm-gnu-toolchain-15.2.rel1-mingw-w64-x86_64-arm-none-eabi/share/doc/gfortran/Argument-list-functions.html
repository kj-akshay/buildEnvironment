<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- Copyright Â© 1999-2025 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "Funding Free Software", the Front-Cover
Texts being (a) (see below), and with the Back-Cover Texts being (b)
(see below).  A copy of the license is included in the section entitled
"GNU Free Documentation License".

(a) The FSF's Front-Cover Text is:

A GNU Manual

(b) The FSF's Back-Cover Text is:

You have freedom to copy and modify this GNU Manual, like GNU
     software.  Copies published by the Free Software Foundation raise
     funds for GNU development. -->
<title>Argument list functions (The GNU Fortran Compiler)</title>

<meta name="description" content="Argument list functions (The GNU Fortran Compiler)">
<meta name="keywords" content="Argument list functions (The GNU Fortran Compiler)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Option-Index.html" rel="index" title="Option Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Extensions-implemented-in-GNU-Fortran.html" rel="up" title="Extensions implemented in GNU Fortran">
<link href="Read_002fWrite-after-EOF-marker.html" rel="next" title="Read/Write after EOF marker">
<link href="OpenACC.html" rel="prev" title="OpenACC">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
span:hover a.copiable-link {visibility: visible}
-->
</style>


</head>

<body lang="en">
<div class="subsection-level-extent" id="Argument-list-functions">
<div class="nav-panel">
<p>
Next: <a href="Read_002fWrite-after-EOF-marker.html" accesskey="n" rel="next">Read/Write after EOF marker</a>, Previous: <a href="OpenACC.html" accesskey="p" rel="prev">OpenACC</a>, Up: <a href="Extensions-implemented-in-GNU-Fortran.html" accesskey="u" rel="up">Extensions implemented in GNU Fortran</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Option-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h4 class="subsection" id="Argument-list-functions-_0025VAL_002c-_0025REF-and-_0025LOC"><span>5.1.20 Argument list functions <code class="code">%VAL</code>, <code class="code">%REF</code> and <code class="code">%LOC</code><a class="copiable-link" href="#Argument-list-functions-_0025VAL_002c-_0025REF-and-_0025LOC"> &para;</a></span></h4>
<a class="index-entry-id" id="index-argument-list-functions"></a>
<a class="index-entry-id" id="index-_0025VAL"></a>
<a class="index-entry-id" id="index-_0025REF"></a>
<a class="index-entry-id" id="index-_0025LOC"></a>

<p>GNU Fortran supports argument list functions <code class="code">%VAL</code>, <code class="code">%REF</code>
and <code class="code">%LOC</code> statements, for backward compatibility with g77.
It is recommended that these should be used only for code that is
accessing facilities outside of GNU Fortran, such as operating system
or windowing facilities.  It is best to constrain such uses to isolated
portions of a program&ndash;portions that deal specifically and exclusively
with low-level, system-dependent facilities.  Such portions might well
provide a portable interface for use by the program as a whole, but are
themselves not portable, and should be thoroughly tested each time they
are rebuilt using a new compiler or version of a compiler.
</p>
<p><code class="code">%VAL</code> passes a scalar argument by value, <code class="code">%REF</code> passes it by
reference and <code class="code">%LOC</code> passes its memory location.  Since gfortran
already passes scalar arguments by reference, <code class="code">%REF</code> is in effect
a do-nothing.  <code class="code">%LOC</code> has the same effect as a Fortran pointer.
</p>
<p>An example of passing an argument by value to a C subroutine foo.:
</p><div class="example smallexample">
<pre class="example-preformatted">C
C prototype      void foo_ (float x);
C
      external foo
      real*4 x
      x = 3.14159
      call foo (%VAL (x))
      end
</pre></div>

<p>For details refer to the g77 manual
<a class="uref" href="https://gcc.gnu.org/onlinedocs/gcc-3.4.6/g77/index.html#Top">https://gcc.gnu.org/onlinedocs/gcc-3.4.6/g77/index.html#Top</a>.
</p>
<p>Also, <code class="code">c_by_val.f</code> and its partner <code class="code">c_by_val.c</code> of the
GNU Fortran testsuite are worth a look.
</p>
</div>



</body>
</html>
