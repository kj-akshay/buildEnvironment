<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- Copyright Â© 1988-2025 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "Funding Free Software", the Front-Cover
Texts being (a) (see below), and with the Back-Cover Texts being (b)
(see below).  A copy of the license is included in the section entitled
"GNU Free Documentation License".

(a) The FSF's Front-Cover Text is:

A GNU Manual

(b) The FSF's Back-Cover Text is:

You have freedom to copy and modify this GNU Manual, like GNU
     software.  Copies published by the Free Software Foundation raise
     funds for GNU development. -->
<title>Constants (GNU Compiler Collection (GCC) Internals)</title>

<meta name="description" content="Constants (GNU Compiler Collection (GCC) Internals)">
<meta name="keywords" content="Constants (GNU Compiler Collection (GCC) Internals)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Option-Index.html" rel="index" title="Option Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="RTL.html" rel="up" title="RTL">
<link href="Regs-and-Memory.html" rel="next" title="Regs and Memory">
<link href="Machine-Modes.html" rel="prev" title="Machine Modes">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
span:hover a.copiable-link {visibility: visible}
-->
</style>


</head>

<body lang="en">
<div class="section-level-extent" id="Constants">
<div class="nav-panel">
<p>
Next: <a href="Regs-and-Memory.html" accesskey="n" rel="next">Registers and Memory</a>, Previous: <a href="Machine-Modes.html" accesskey="p" rel="prev">Machine Modes</a>, Up: <a href="RTL.html" accesskey="u" rel="up">RTL Representation</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Option-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h3 class="section" id="Constant-Expression-Types"><span>13.7 Constant Expression Types<a class="copiable-link" href="#Constant-Expression-Types"> &para;</a></span></h3>
<a class="index-entry-id" id="index-RTL-constants"></a>
<a class="index-entry-id" id="index-RTL-constant-expression-types"></a>

<p>The simplest RTL expressions are those that represent constant values.
</p>
<dl class="table">
<dt><a id="index-const_005fint"></a><span><code class="code">(const_int <var class="var">i</var>)</code><a class="copiable-link" href="#index-const_005fint"> &para;</a></span></dt>
<dd><p>This type of expression represents the integer value <var class="var">i</var>.  <var class="var">i</var>
is customarily accessed with the macro <code class="code">INTVAL</code> as in
<code class="code">INTVAL (<var class="var">exp</var>)</code>, which is equivalent to <code class="code">XWINT (<var class="var">exp</var>, 0)</code>.
</p>
<p>Constants generated for modes with fewer bits than in
<code class="code">HOST_WIDE_INT</code> must be sign extended to full width (e.g., with
<code class="code">gen_int_mode</code>).  For constants for modes with more bits than in
<code class="code">HOST_WIDE_INT</code> the implied high order bits of that constant are
copies of the top bit.  Note however that values are neither
inherently signed nor inherently unsigned; where necessary, signedness
is determined by the rtl operation instead.
</p>
<a class="index-entry-id" id="index-const0_005frtx"></a>
<a class="index-entry-id" id="index-const1_005frtx"></a>
<a class="index-entry-id" id="index-const2_005frtx"></a>
<a class="index-entry-id" id="index-constm1_005frtx"></a>
<p>There is only one expression object for the integer value zero; it is
the value of the variable <code class="code">const0_rtx</code>.  Likewise, the only
expression for integer value one is found in <code class="code">const1_rtx</code>, the only
expression for integer value two is found in <code class="code">const2_rtx</code>, and the
only expression for integer value negative one is found in
<code class="code">constm1_rtx</code>.  Any attempt to create an expression of code
<code class="code">const_int</code> and value zero, one, two or negative one will return
<code class="code">const0_rtx</code>, <code class="code">const1_rtx</code>, <code class="code">const2_rtx</code> or
<code class="code">constm1_rtx</code> as appropriate.
</p>
<a class="index-entry-id" id="index-const_005ftrue_005frtx"></a>
<p>Similarly, there is only one object for the integer whose value is
<code class="code">STORE_FLAG_VALUE</code>.  It is found in <code class="code">const_true_rtx</code>.  If
<code class="code">STORE_FLAG_VALUE</code> is one, <code class="code">const_true_rtx</code> and
<code class="code">const1_rtx</code> will point to the same object.  If
<code class="code">STORE_FLAG_VALUE</code> is &minus;1, <code class="code">const_true_rtx</code> and
<code class="code">constm1_rtx</code> will point to the same object.
</p>
</dd>
<dt><a id="index-const_005fdouble"></a><span><code class="code">(const_double:<var class="var">m</var> <var class="var">i0</var> <var class="var">i1</var> &hellip;)</code><a class="copiable-link" href="#index-const_005fdouble"> &para;</a></span></dt>
<dd><p>This represents either a floating-point constant of mode <var class="var">m</var> or
(on older ports that do not define
<code class="code">TARGET_SUPPORTS_WIDE_INT</code>) an integer constant too large to fit
into <code class="code">HOST_BITS_PER_WIDE_INT</code> bits but small enough to fit within
twice that number of bits.  In the latter case, <var class="var">m</var> will be
<code class="code">VOIDmode</code>.  For integral values constants for modes with more
bits than twice the number in <code class="code">HOST_WIDE_INT</code> the implied high
order bits of that constant are copies of the top bit of
<code class="code">CONST_DOUBLE_HIGH</code>.  Note however that integral values are
neither inherently signed nor inherently unsigned; where necessary,
signedness is determined by the rtl operation instead.
</p>
<p>On more modern ports, <code class="code">CONST_DOUBLE</code> only represents floating
point values.  New ports define <code class="code">TARGET_SUPPORTS_WIDE_INT</code> to
make this designation.
</p>
<a class="index-entry-id" id="index-CONST_005fDOUBLE_005fLOW"></a>
<p>If <var class="var">m</var> is <code class="code">VOIDmode</code>, the bits of the value are stored in
<var class="var">i0</var> and <var class="var">i1</var>.  <var class="var">i0</var> is customarily accessed with the macro
<code class="code">CONST_DOUBLE_LOW</code> and <var class="var">i1</var> with <code class="code">CONST_DOUBLE_HIGH</code>.
</p>
<p>If the constant is floating point (regardless of its precision), then
the number of integers used to store the value depends on the size of
<code class="code">REAL_VALUE_TYPE</code> (see <a class="pxref" href="Floating-Point.html">Cross Compilation and Floating Point</a>).  The integers
represent a floating point number, but not precisely in the target
machine&rsquo;s or host machine&rsquo;s floating point format.  To convert them to
the precise bit pattern used by the target machine, use the macro
<code class="code">REAL_VALUE_TO_TARGET_DOUBLE</code> and friends (see <a class="pxref" href="Data-Output.html">Output of Data</a>).
</p>
<a class="index-entry-id" id="index-const_005fdouble_005fzero"></a>
<p>The host dependency for the number of integers used to store a double
value makes it problematic for machine descriptions to use expressions
of code <code class="code">const_double</code> and therefore a syntactic alias has been
provided:
</p>
<div class="example smallexample">
<pre class="example-preformatted">(const_double_zero:<var class="var">m</var>)
</pre></div>

<p>standing for:
</p>
<div class="example smallexample">
<pre class="example-preformatted">(const_double:<var class="var">m</var> 0 0 ...)
</pre></div>

<p>for matching the floating-point value zero, possibly the only useful one.
</p>
</dd>
<dt><a id="index-CONST_005fWIDE_005fINT"></a><span><code class="code">(const_wide_int:<var class="var">m</var> <var class="var">nunits</var> <var class="var">elt0</var> &hellip;)</code><a class="copiable-link" href="#index-CONST_005fWIDE_005fINT"> &para;</a></span></dt>
<dd><p>This contains an array of <code class="code">HOST_WIDE_INT</code>s that is large enough
to hold any constant that can be represented on the target.  This form
of rtl is only used on targets that define
<code class="code">TARGET_SUPPORTS_WIDE_INT</code> to be nonzero and then
<code class="code">CONST_DOUBLE</code>s are only used to hold floating-point values.  If
the target leaves <code class="code">TARGET_SUPPORTS_WIDE_INT</code> defined as 0,
<code class="code">CONST_WIDE_INT</code>s are not used and <code class="code">CONST_DOUBLE</code>s are as
they were before.
</p>
<p>The values are stored in a compressed format.  The higher-order
0s or -1s are not represented if they are just the logical sign
extension of the number that is represented.
</p>
</dd>
<dt><a id="index-CONST_005fWIDE_005fINT_005fVEC"></a><span><code class="code">CONST_WIDE_INT_VEC (<var class="var">code</var>)</code><a class="copiable-link" href="#index-CONST_005fWIDE_005fINT_005fVEC"> &para;</a></span></dt>
<dd><p>Returns the entire array of <code class="code">HOST_WIDE_INT</code>s that are used to
store the value.  This macro should be rarely used.
</p>
</dd>
<dt><a id="index-CONST_005fWIDE_005fINT_005fNUNITS"></a><span><code class="code">CONST_WIDE_INT_NUNITS (<var class="var">code</var>)</code><a class="copiable-link" href="#index-CONST_005fWIDE_005fINT_005fNUNITS"> &para;</a></span></dt>
<dd><p>The number of <code class="code">HOST_WIDE_INT</code>s used to represent the number.
Note that this generally is smaller than the number of
<code class="code">HOST_WIDE_INT</code>s implied by the mode size.
</p>
</dd>
<dt><a id="index-CONST_005fWIDE_005fINT_005fELT"></a><span><code class="code">CONST_WIDE_INT_ELT (<var class="var">code</var>,<var class="var">i</var>)</code><a class="copiable-link" href="#index-CONST_005fWIDE_005fINT_005fELT"> &para;</a></span></dt>
<dd><p>Returns the <code class="code">i</code>th element of the array.   Element 0 is contains
the low order bits of the constant.
</p>
</dd>
<dt><a id="index-const_005ffixed"></a><span><code class="code">(const_fixed:<var class="var">m</var> &hellip;)</code><a class="copiable-link" href="#index-const_005ffixed"> &para;</a></span></dt>
<dd><p>Represents a fixed-point constant of mode <var class="var">m</var>.
The operand is a data structure of type <code class="code">struct fixed_value</code> and
is accessed with the macro <code class="code">CONST_FIXED_VALUE</code>.  The high part of
data is accessed with <code class="code">CONST_FIXED_VALUE_HIGH</code>; the low part is
accessed with <code class="code">CONST_FIXED_VALUE_LOW</code>.
</p>
</dd>
<dt><a id="index-const_005fpoly_005fint"></a><span><code class="code">(const_poly_int:<var class="var">m</var> [<var class="var">c0</var> <var class="var">c1</var> &hellip;])</code><a class="copiable-link" href="#index-const_005fpoly_005fint"> &para;</a></span></dt>
<dd><p>Represents a <code class="code">poly_int</code>-style polynomial integer with coefficients
<var class="var">c0</var>, <var class="var">c1</var>, &hellip;.  The coefficients are <code class="code">wide_int</code>-based
integers rather than rtxes.  <code class="code">CONST_POLY_INT_COEFFS</code> gives the
values of individual coefficients (which is mostly only useful in
low-level routines) and <code class="code">const_poly_int_value</code> gives the full
<code class="code">poly_int</code> value.
</p>
</dd>
<dt><a id="index-const_005fvector"></a><span><code class="code">(const_vector:<var class="var">m</var> [<var class="var">x0</var> <var class="var">x1</var> &hellip;])</code><a class="copiable-link" href="#index-const_005fvector"> &para;</a></span></dt>
<dd><p>Represents a vector constant.  The values in square brackets are
elements of the vector, which are always <code class="code">const_int</code>,
<code class="code">const_wide_int</code>, <code class="code">const_double</code> or <code class="code">const_fixed</code>
expressions.
</p>
<p>Each vector constant <var class="var">v</var> is treated as a specific instance of an
arbitrary-length sequence that itself contains
&lsquo;<samp class="samp">CONST_VECTOR_NPATTERNS (<var class="var">v</var>)</samp>&rsquo; interleaved patterns.  Each
pattern has the form:
</p>
<div class="example smallexample">
<pre class="example-preformatted">{ <var class="var">base0</var>, <var class="var">base1</var>, <var class="var">base1</var> + <var class="var">step</var>, <var class="var">base1</var> + <var class="var">step</var> * 2, ... }
</pre></div>

<p>The first three elements in each pattern are enough to determine the
values of the other elements.  However, if all <var class="var">step</var>s are zero,
only the first two elements are needed.  If in addition each <var class="var">base1</var>
is equal to the corresponding <var class="var">base0</var>, only the first element in
each pattern is needed.  The number of determining elements per pattern
is given by &lsquo;<samp class="samp">CONST_VECTOR_NELTS_PER_PATTERN (<var class="var">v</var>)</samp>&rsquo;.
</p>
<p>For example, the constant:
</p>
<div class="example smallexample">
<pre class="example-preformatted">{ 0, 1, 2, 6, 3, 8, 4, 10, 5, 12, 6, 14, 7, 16, 8, 18 }
</pre></div>

<p>is interpreted as an interleaving of the sequences:
</p>
<div class="example smallexample">
<pre class="example-preformatted">{ 0, 2, 3, 4, 5, 6, 7, 8 }
{ 1, 6, 8, 10, 12, 14, 16, 18 }
</pre></div>

<p>where the sequences are represented by the following patterns:
</p>
<div class="example smallexample">
<pre class="example-preformatted"><var class="var">base0</var> == 0, <var class="var">base1</var> == 2, <var class="var">step</var> == 1
<var class="var">base0</var> == 1, <var class="var">base1</var> == 6, <var class="var">step</var> == 2
</pre></div>

<p>In this case:
</p>
<div class="example smallexample">
<pre class="example-preformatted">CONST_VECTOR_NPATTERNS (<var class="var">v</var>) == 2
CONST_VECTOR_NELTS_PER_PATTERN (<var class="var">v</var>) == 3
</pre></div>

<p>Thus the first 6 elements (&lsquo;<samp class="samp">{ 0, 1, 2, 6, 3, 8 }</samp>&rsquo;) are enough
to determine the whole sequence; we refer to them as the &ldquo;encoded&rdquo;
elements.  They are the only elements present in the square brackets
for variable-length <code class="code">const_vector</code>s (i.e. for
<code class="code">const_vector</code>s whose mode <var class="var">m</var> has a variable number of
elements).  However, as a convenience to code that needs to handle
both <code class="code">const_vector</code>s and <code class="code">parallel</code>s, all elements are
present in the square brackets for fixed-length <code class="code">const_vector</code>s;
the encoding scheme simply reduces the amount of work involved in
processing constants that follow a regular pattern.
</p>
<p>Sometimes this scheme can create two possible encodings of the same
vector.  For example { 0, 1 } could be seen as two patterns with
one element each or one pattern with two elements (<var class="var">base0</var> and
<var class="var">base1</var>).  The canonical encoding is always the one with the
fewest patterns or (if both encodings have the same number of
patterns) the one with the fewest encoded elements.
</p>
<p>&lsquo;<samp class="samp">const_vector_encoding_nelts (<var class="var">v</var>)</samp>&rsquo; gives the total number of
encoded elements in <var class="var">v</var>, which is 6 in the example above.
<code class="code">CONST_VECTOR_ENCODED_ELT (<var class="var">v</var>, <var class="var">i</var>)</code> accesses the value
of encoded element <var class="var">i</var>.
</p>
<p>&lsquo;<samp class="samp">CONST_VECTOR_DUPLICATE_P (<var class="var">v</var>)</samp>&rsquo; is true if <var class="var">v</var> simply contains
repeated instances of &lsquo;<samp class="samp">CONST_VECTOR_NPATTERNS (<var class="var">v</var>)</samp>&rsquo; values.  This is
a shorthand for testing &lsquo;<samp class="samp">CONST_VECTOR_NELTS_PER_PATTERN (<var class="var">v</var>) == 1</samp>&rsquo;.
</p>
<p>&lsquo;<samp class="samp">CONST_VECTOR_STEPPED_P (<var class="var">v</var>)</samp>&rsquo; is true if at least one
pattern in <var class="var">v</var> has a nonzero step.  This is a shorthand for
testing &lsquo;<samp class="samp">CONST_VECTOR_NELTS_PER_PATTERN (<var class="var">v</var>) == 3</samp>&rsquo;.
</p>
<p><code class="code">CONST_VECTOR_NUNITS (<var class="var">v</var>)</code> gives the total number of elements
in <var class="var">v</var>; it is a shorthand for getting the number of units in
&lsquo;<samp class="samp">GET_MODE (<var class="var">v</var>)</samp>&rsquo;.
</p>
<p>The utility function <code class="code">const_vector_elt</code> gives the value of an
arbitrary element as an <code class="code">rtx</code>.  <code class="code">const_vector_int_elt</code> gives
the same value as a <code class="code">wide_int</code>.
</p>
</dd>
<dt><a id="index-const_005fstring"></a><span><code class="code">(const_string <var class="var">str</var>)</code><a class="copiable-link" href="#index-const_005fstring"> &para;</a></span></dt>
<dd><p>Represents a constant string with value <var class="var">str</var>.  Currently this is
used only for insn attributes (see <a class="pxref" href="Insn-Attributes.html">Instruction Attributes</a>) since constant
strings in C are placed in memory.
</p>
</dd>
<dt><a id="index-symbol_005fref"></a><span><code class="code">(symbol_ref:<var class="var">mode</var> <var class="var">symbol</var>)</code><a class="copiable-link" href="#index-symbol_005fref"> &para;</a></span></dt>
<dd><p>Represents the value of an assembler label for data.  <var class="var">symbol</var> is
a string that describes the name of the assembler label.  If it starts
with a &lsquo;<samp class="samp">*</samp>&rsquo;, the label is the rest of <var class="var">symbol</var> not including
the &lsquo;<samp class="samp">*</samp>&rsquo;.  Otherwise, the label is <var class="var">symbol</var>, usually prefixed
with &lsquo;<samp class="samp">_</samp>&rsquo;.
</p>
<p>The <code class="code">symbol_ref</code> contains a mode, which is usually <code class="code">Pmode</code>.
Usually that is the only mode for which a symbol is directly valid.
</p>
</dd>
<dt><a id="index-label_005fref"></a><span><code class="code">(label_ref:<var class="var">mode</var> <var class="var">label</var>)</code><a class="copiable-link" href="#index-label_005fref"> &para;</a></span></dt>
<dd><p>Represents the value of an assembler label for code.  It contains one
operand, an expression, which must be a <code class="code">code_label</code> or a <code class="code">note</code>
of type <code class="code">NOTE_INSN_DELETED_LABEL</code> that appears in the instruction
sequence to identify the place where the label should go.
</p>
<p>The reason for using a distinct expression type for code label
references is so that jump optimization can distinguish them.
</p>
<p>The <code class="code">label_ref</code> contains a mode, which is usually <code class="code">Pmode</code>.
Usually that is the only mode for which a label is directly valid.
</p>
</dd>
<dt><a id="index-const"></a><span><code class="code">(const:<var class="var">m</var> <var class="var">exp</var>)</code><a class="copiable-link" href="#index-const"> &para;</a></span></dt>
<dd><p>Represents a constant that is the result of an assembly-time
arithmetic computation.  The operand, <var class="var">exp</var>, contains only
<code class="code">const_int</code>, <code class="code">symbol_ref</code>, <code class="code">label_ref</code> or <code class="code">unspec</code>
expressions, combined with <code class="code">plus</code> and <code class="code">minus</code>.  Any such
<code class="code">unspec</code>s are target-specific and typically represent some form
of relocation operator.  <var class="var">m</var> should be a valid address mode.
</p>
</dd>
<dt><a id="index-high"></a><span><code class="code">(high:<var class="var">m</var> <var class="var">exp</var>)</code><a class="copiable-link" href="#index-high"> &para;</a></span></dt>
<dd><p>Represents the high-order bits of <var class="var">exp</var>.  
The number of bits is machine-dependent and is
normally the number of bits specified in an instruction that initializes
the high order bits of a register.  It is used with <code class="code">lo_sum</code> to
represent the typical two-instruction sequence used in RISC machines to
reference large immediate values and/or link-time constants such
as global memory addresses.  In the latter case, <var class="var">m</var> is <code class="code">Pmode</code>
and <var class="var">exp</var> is usually a constant expression involving <code class="code">symbol_ref</code>.
</p></dd>
</dl>

<a class="index-entry-id" id="index-CONST0_005fRTX"></a>
<a class="index-entry-id" id="index-CONST1_005fRTX"></a>
<a class="index-entry-id" id="index-CONST2_005fRTX"></a>
<p>The macro <code class="code">CONST0_RTX (<var class="var">mode</var>)</code> refers to an expression with
value 0 in mode <var class="var">mode</var>.  If mode <var class="var">mode</var> is of mode class
<code class="code">MODE_INT</code>, it returns <code class="code">const0_rtx</code>.  If mode <var class="var">mode</var> is of
mode class <code class="code">MODE_FLOAT</code>, it returns a <code class="code">CONST_DOUBLE</code>
expression in mode <var class="var">mode</var>.  Otherwise, it returns a
<code class="code">CONST_VECTOR</code> expression in mode <var class="var">mode</var>.  Similarly, the macro
<code class="code">CONST1_RTX (<var class="var">mode</var>)</code> refers to an expression with value 1 in
mode <var class="var">mode</var> and similarly for <code class="code">CONST2_RTX</code>.  The
<code class="code">CONST1_RTX</code> and <code class="code">CONST2_RTX</code> macros are undefined
for vector modes.
</p>
</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Regs-and-Memory.html">Registers and Memory</a>, Previous: <a href="Machine-Modes.html">Machine Modes</a>, Up: <a href="RTL.html">RTL Representation</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Option-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
