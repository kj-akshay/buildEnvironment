<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- Copyright Â© 1988-2025 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "Funding Free Software", the Front-Cover
Texts being (a) (see below), and with the Back-Cover Texts being (b)
(see below).  A copy of the license is included in the section entitled
"GNU Free Documentation License".

(a) The FSF's Front-Cover Text is:

A GNU Manual

(b) The FSF's Back-Cover Text is:

You have freedom to copy and modify this GNU Manual, like GNU
     software.  Copies published by the Free Software Foundation raise
     funds for GNU development. -->
<title>Peephole Definitions (GNU Compiler Collection (GCC) Internals)</title>

<meta name="description" content="Peephole Definitions (GNU Compiler Collection (GCC) Internals)">
<meta name="keywords" content="Peephole Definitions (GNU Compiler Collection (GCC) Internals)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Option-Index.html" rel="index" title="Option Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Machine-Desc.html" rel="up" title="Machine Desc">
<link href="Insn-Attributes.html" rel="next" title="Insn Attributes">
<link href="Including-Patterns.html" rel="prev" title="Including Patterns">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
span:hover a.copiable-link {visibility: visible}
-->
</style>


</head>

<body lang="en">
<div class="section-level-extent" id="Peephole-Definitions">
<div class="nav-panel">
<p>
Next: <a href="Insn-Attributes.html" accesskey="n" rel="next">Instruction Attributes</a>, Previous: <a href="Including-Patterns.html" accesskey="p" rel="prev">Including Patterns in Machine Descriptions.</a>, Up: <a href="Machine-Desc.html" accesskey="u" rel="up">Machine Descriptions</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Option-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h3 class="section" id="Machine_002dSpecific-Peephole-Optimizers"><span>16.19 Machine-Specific Peephole Optimizers<a class="copiable-link" href="#Machine_002dSpecific-Peephole-Optimizers"> &para;</a></span></h3>
<a class="index-entry-id" id="index-peephole-optimizer-definitions"></a>
<a class="index-entry-id" id="index-defining-peephole-optimizers"></a>

<p>In addition to instruction patterns the <samp class="file">md</samp> file may contain
definitions of machine-specific peephole optimizations.
</p>
<p>The combiner does not notice certain peephole optimizations when the data
flow in the program does not suggest that it should try them.  For example,
sometimes two consecutive insns related in purpose can be combined even
though the second one does not appear to use a register computed in the
first one.  A machine-specific peephole optimizer can detect such
opportunities.
</p>
<p>There are two forms of peephole definitions that may be used.  The
original <code class="code">define_peephole</code> is run at assembly output time to
match insns and substitute assembly text.  Use of <code class="code">define_peephole</code>
is deprecated.
</p>
<p>A newer <code class="code">define_peephole2</code> matches insns and substitutes new
insns.  The <code class="code">peephole2</code> pass is run after register allocation
but before scheduling, which may result in much better code for
targets that do scheduling.
</p>

<ul class="mini-toc">
<li><a href="define_005fpeephole.html" accesskey="1">RTL to Text Peephole Optimizers</a></li>
<li><a href="define_005fpeephole2.html" accesskey="2">RTL to RTL Peephole Optimizers</a></li>
</ul>
</div>



</body>
</html>
