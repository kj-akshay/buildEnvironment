<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- Copyright Â© 1988-2025 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "Funding Free Software", the Front-Cover
Texts being (a) (see below), and with the Back-Cover Texts being (b)
(see below).  A copy of the license is included in the section entitled
"GNU Free Documentation License".

(a) The FSF's Front-Cover Text is:

A GNU Manual

(b) The FSF's Back-Cover Text is:

You have freedom to copy and modify this GNU Manual, like GNU
     software.  Copies published by the Free Software Foundation raise
     funds for GNU development. -->
<title>Attr Example (GNU Compiler Collection (GCC) Internals)</title>

<meta name="description" content="Attr Example (GNU Compiler Collection (GCC) Internals)">
<meta name="keywords" content="Attr Example (GNU Compiler Collection (GCC) Internals)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Option-Index.html" rel="index" title="Option Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Insn-Attributes.html" rel="up" title="Insn Attributes">
<link href="Insn-Lengths.html" rel="next" title="Insn Lengths">
<link href="Tagging-Insns.html" rel="prev" title="Tagging Insns">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
span:hover a.copiable-link {visibility: visible}
-->
</style>


</head>

<body lang="en">
<div class="subsection-level-extent" id="Attr-Example">
<div class="nav-panel">
<p>
Next: <a href="Insn-Lengths.html" accesskey="n" rel="next">Computing the Length of an Insn</a>, Previous: <a href="Tagging-Insns.html" accesskey="p" rel="prev">Assigning Attribute Values to Insns</a>, Up: <a href="Insn-Attributes.html" accesskey="u" rel="up">Instruction Attributes</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Option-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h4 class="subsection" id="Example-of-Attribute-Specifications"><span>16.20.4 Example of Attribute Specifications<a class="copiable-link" href="#Example-of-Attribute-Specifications"> &para;</a></span></h4>
<a class="index-entry-id" id="index-attribute-specifications-example"></a>
<a class="index-entry-id" id="index-attribute-specifications"></a>

<p>The judicious use of defaulting is important in the efficient use of
insn attributes.  Typically, insns are divided into <em class="dfn">types</em> and an
attribute, customarily called <code class="code">type</code>, is used to represent this
value.  This attribute is normally used only to define the default value
for other attributes.  An example will clarify this usage.
</p>
<p>Assume we have a RISC machine with a condition code and in which only
full-word operations are performed in registers.  Let us assume that we
can divide all insns into loads, stores, (integer) arithmetic
operations, floating point operations, and branches.
</p>
<p>Here we will concern ourselves with determining the effect of an insn on
the condition code and will limit ourselves to the following possible
effects:  The condition code can be set unpredictably (clobbered), not
be changed, be set to agree with the results of the operation, or only
changed if the item previously set into the condition code has been
modified.
</p>
<p>Here is part of a sample <samp class="file">md</samp> file for such a machine:
</p>
<div class="example smallexample">
<pre class="example-preformatted">(define_attr &quot;type&quot; &quot;load,store,arith,fp,branch&quot; (const_string &quot;arith&quot;))

(define_attr &quot;cc&quot; &quot;clobber,unchanged,set,change0&quot;
             (cond [(eq_attr &quot;type&quot; &quot;load&quot;)
                        (const_string &quot;change0&quot;)
                    (eq_attr &quot;type&quot; &quot;store,branch&quot;)
                        (const_string &quot;unchanged&quot;)
                    (eq_attr &quot;type&quot; &quot;arith&quot;)
                        (if_then_else (match_operand:SI 0 &quot;&quot; &quot;&quot;)
                                      (const_string &quot;set&quot;)
                                      (const_string &quot;clobber&quot;))]
                   (const_string &quot;clobber&quot;)))

(define_insn &quot;&quot;
  [(set (match_operand:SI 0 &quot;general_operand&quot; &quot;=r,r,m&quot;)
        (match_operand:SI 1 &quot;general_operand&quot; &quot;r,m,r&quot;))]
  &quot;&quot;
  &quot;@
   move %0,%1
   load %0,%1
   store %0,%1&quot;
  [(set_attr &quot;type&quot; &quot;arith,load,store&quot;)])
</pre></div>

<p>Note that we assume in the above example that arithmetic operations
performed on quantities smaller than a machine word clobber the condition
code since they will set the condition code to a value corresponding to the
full-word result.
</p>
</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Insn-Lengths.html">Computing the Length of an Insn</a>, Previous: <a href="Tagging-Insns.html">Assigning Attribute Values to Insns</a>, Up: <a href="Insn-Attributes.html">Instruction Attributes</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Option-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
