<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- Copyright Â© 1988-2025 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "Funding Free Software", the Front-Cover
Texts being (a) (see below), and with the Back-Cover Texts being (b)
(see below).  A copy of the license is included in the section entitled
"GNU Free Documentation License".

(a) The FSF's Front-Cover Text is:

A GNU Manual

(b) The FSF's Back-Cover Text is:

You have freedom to copy and modify this GNU Manual, like GNU
     software.  Copies published by the Free Software Foundation raise
     funds for GNU development. -->
<title>Cleanups (GNU Compiler Collection (GCC) Internals)</title>

<meta name="description" content="Cleanups (GNU Compiler Collection (GCC) Internals)">
<meta name="keywords" content="Cleanups (GNU Compiler Collection (GCC) Internals)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Option-Index.html" rel="index" title="Option Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Statements.html" rel="up" title="Statements">
<link href="OpenMP.html" rel="next" title="OpenMP">
<link href="Jumps.html" rel="prev" title="Jumps">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
span:hover a.copiable-link {visibility: visible}
-->
</style>


</head>

<body lang="en">
<div class="subsection-level-extent" id="Cleanups">
<div class="nav-panel">
<p>
Next: <a href="OpenMP.html" accesskey="n" rel="next">OpenMP</a>, Previous: <a href="Jumps.html" accesskey="p" rel="prev">Jumps</a>, Up: <a href="Statements.html" accesskey="u" rel="up">Statements</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Option-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h4 class="subsection" id="Cleanups-1"><span>10.7.6 Cleanups<a class="copiable-link" href="#Cleanups-1"> &para;</a></span></h4>
<a class="index-entry-id" id="index-Cleanups"></a>

<p>Destructors for local C++ objects and similar dynamic cleanups are
represented in GIMPLE by a <code class="code">TRY_FINALLY_EXPR</code>.
<code class="code">TRY_FINALLY_EXPR</code> has two operands, both of which are a sequence
of statements to execute.  The first sequence is executed.  When it
completes the second sequence is executed.
</p>
<p>The first sequence may complete in the following ways:
</p>
<ol class="enumerate">
<li> Execute the last statement in the sequence and fall off the
end.

</li><li> Execute a goto statement (<code class="code">GOTO_EXPR</code>) to an ordinary
label outside the sequence.

</li><li> Execute a return statement (<code class="code">RETURN_EXPR</code>).

</li><li> Throw an exception.  This is currently not explicitly represented in
GIMPLE.

</li></ol>

<p>The second sequence is not executed if the first sequence completes by
calling <code class="code">setjmp</code> or <code class="code">exit</code> or any other function that does
not return.  The second sequence is also not executed if the first
sequence completes via a non-local goto or a computed goto (in general
the compiler does not know whether such a goto statement exits the
first sequence or not, so we assume that it doesn&rsquo;t).
</p>
<p>After the second sequence is executed, if it completes normally by
falling off the end, execution continues wherever the first sequence
would have continued, by falling off the end, or doing a goto, etc.
</p>
<p>If the second sequence is an <code class="code">EH_ELSE_EXPR</code> selector, then the
sequence in its first operand is used when the first sequence completes
normally, and that in its second operand is used for exceptional
cleanups, i.e., when an exception propagates out of the first sequence.
</p>
<p><code class="code">TRY_FINALLY_EXPR</code> complicates the flow graph, since the cleanup
needs to appear on every edge out of the controlled block; this
reduces the freedom to move code across these edges.  Therefore, the
EH lowering pass which runs before most of the optimization passes
eliminates these expressions by explicitly adding the cleanup to each
edge.  Rethrowing the exception is represented using <code class="code">RESX_EXPR</code>.
</p>
</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="OpenMP.html">OpenMP</a>, Previous: <a href="Jumps.html">Jumps</a>, Up: <a href="Statements.html">Statements</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Option-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
