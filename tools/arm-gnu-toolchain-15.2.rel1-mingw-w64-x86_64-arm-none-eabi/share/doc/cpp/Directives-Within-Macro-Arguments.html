<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- Copyright Â© 1987-2025 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation.  A copy of
the license is included in the
section entitled "GNU Free Documentation License".

This manual contains no Invariant Sections.  The Front-Cover Texts are
(a) (see below), and the Back-Cover Texts are (b) (see below).

(a) The FSF's Front-Cover Text is:

A GNU Manual

(b) The FSF's Back-Cover Text is:

You have freedom to copy and modify this GNU Manual, like GNU
     software.  Copies published by the Free Software Foundation raise
     funds for GNU development. -->
<title>Directives Within Macro Arguments (The C Preprocessor)</title>

<meta name="description" content="Directives Within Macro Arguments (The C Preprocessor)">
<meta name="keywords" content="Directives Within Macro Arguments (The C Preprocessor)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Index-of-Directives.html" rel="index" title="Index of Directives">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Macros.html" rel="up" title="Macros">
<link href="Macro-Pitfalls.html" rel="next" title="Macro Pitfalls">
<link href="Undefining-and-Redefining-Macros.html" rel="prev" title="Undefining and Redefining Macros">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
span:hover a.copiable-link {visibility: visible}
-->
</style>


</head>

<body lang="en">
<div class="section-level-extent" id="Directives-Within-Macro-Arguments">
<div class="nav-panel">
<p>
Next: <a href="Macro-Pitfalls.html" accesskey="n" rel="next">Macro Pitfalls</a>, Previous: <a href="Undefining-and-Redefining-Macros.html" accesskey="p" rel="prev">Undefining and Redefining Macros</a>, Up: <a href="Macros.html" accesskey="u" rel="up">Macros</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index-of-Directives.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h3 class="section" id="Directives-Within-Macro-Arguments-1"><span>3.9 Directives Within Macro Arguments<a class="copiable-link" href="#Directives-Within-Macro-Arguments-1"> &para;</a></span></h3>
<a class="index-entry-id" id="index-macro-arguments-and-directives"></a>

<p>Occasionally it is convenient to use preprocessor directives within
the arguments of a macro.  The C and C++ standards declare that
behavior in these cases is undefined.  GNU CPP
processes arbitrary directives within macro arguments in
exactly the same way as it would have processed the directive were the
function-like macro invocation not present.
</p>
<p>If, within a macro invocation, that macro is redefined, then the new
definition takes effect in time for argument pre-expansion, but the
original definition is still used for argument replacement.  Here is a
pathological example:
</p>
<div class="example smallexample">
<pre class="example-preformatted">#define f(x) x x
f (1
#undef f
#define f 2
f)
</pre></div>

<p>which expands to
</p>
<div class="example smallexample">
<pre class="example-preformatted">1 2 1 2
</pre></div>

<p>with the semantics described above.
</p>
</div>



</body>
</html>
