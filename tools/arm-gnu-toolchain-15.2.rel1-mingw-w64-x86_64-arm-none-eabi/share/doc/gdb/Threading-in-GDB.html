<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- Copyright Â© 1988-2024 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "Free Software" and "Free Software Needs
Free Documentation", with the Front-Cover Texts being "A GNU Manual,"
and with the Back-Cover Texts as in (a) below.

(a) The FSF's Back-Cover Text is: "You are free to copy and modify
this GNU Manual.  Buying copies from GNU Press supports the FSF in
developing GNU and promoting software freedom." -->
<title>Threading in GDB (Debugging with GDB)</title>

<meta name="description" content="Threading in GDB (Debugging with GDB)">
<meta name="keywords" content="Threading in GDB (Debugging with GDB)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Concept-Index.html" rel="index" title="Concept Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Python-API.html" rel="up" title="Python API">
<link href="Exception-Handling.html" rel="next" title="Exception Handling">
<link href="Basic-Python.html" rel="prev" title="Basic Python">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
span:hover a.copiable-link {visibility: visible}
strong.def-name {font-family: monospace; font-weight: bold; font-size: larger}
-->
</style>


</head>

<body lang="en">
<div class="subsubsection-level-extent" id="Threading-in-GDB">
<div class="nav-panel">
<p>
Next: <a href="Exception-Handling.html" accesskey="n" rel="next">Exception Handling</a>, Previous: <a href="Basic-Python.html" accesskey="p" rel="prev">Basic Python</a>, Up: <a href="Python-API.html" accesskey="u" rel="up">Python API</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Concept-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h4 class="subsubsection" id="Threading-in-GDB-1"><span>23.3.2.2 Threading in GDB<a class="copiable-link" href="#Threading-in-GDB-1"> &para;</a></span></h4>

<p><small class="sc">GDB</small> is not thread-safe.  If your Python program uses multiple
threads, you must be careful to only call <small class="sc">GDB</small>-specific
functions in the <small class="sc">GDB</small> thread.  <small class="sc">GDB</small> provides some
functions to help with this.
</p>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-gdb_002eblock_005fsignals"><span class="category-def">Function: </span><span><strong class="def-name">gdb.block_signals</strong> <var class="def-var-arguments">()</var><a class="copiable-link" href="#index-gdb_002eblock_005fsignals"> &para;</a></span></dt>
<dd><p>As mentioned earlier (see <a class="pxref" href="Basic-Python.html">Basic Python</a>), certain signals must be
delivered to the <small class="sc">GDB</small> main thread.  The <code class="code">block_signals</code>
function returns a context manager that will block these signals on
entry.  This can be used when starting a new thread to ensure that the
signals are blocked there, like:
</p>
<div class="example smallexample">
<pre class="example-preformatted">with gdb.block_signals():
   start_new_thread()
</pre></div>
</dd></dl>

<dl class="first-deftp">
<dt class="deftp" id="index-gdb_002eThread"><span class="category-def">class: </span><span><strong class="def-name">gdb.Thread</strong><a class="copiable-link" href="#index-gdb_002eThread"> &para;</a></span></dt>
<dd><p>This is a subclass of Python&rsquo;s <code class="code">threading.Thread</code> class.  It
overrides the <code class="code">start</code> method to call <code class="code">block_signals</code>, making
this an easy-to-use drop-in replacement for creating threads that will
work well in <small class="sc">GDB</small>.
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-gdb_002einterrupt"><span class="category-def">Function: </span><span><strong class="def-name">gdb.interrupt</strong> <var class="def-var-arguments">()</var><a class="copiable-link" href="#index-gdb_002einterrupt"> &para;</a></span></dt>
<dd><p>This causes <small class="sc">GDB</small> to react as if the user had typed a control-C
character at the terminal.  That is, if the inferior is running, it is
interrupted; if a <small class="sc">GDB</small> command is executing, it is stopped;
and if a Python command is running, <code class="code">KeyboardInterrupt</code> will be
raised.
</p>
<p>Unlike most Python APIs in <small class="sc">GDB</small>, <code class="code">interrupt</code> is
thread-safe.
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-gdb_002epost_005fevent"><span class="category-def">Function: </span><span><strong class="def-name">gdb.post_event</strong> <var class="def-var-arguments">(event)</var><a class="copiable-link" href="#index-gdb_002epost_005fevent"> &para;</a></span></dt>
<dd><p>Put <var class="var">event</var>, a callable object taking no arguments, into
<small class="sc">GDB</small>&rsquo;s internal event queue.  This callable will be invoked at
some later point, during <small class="sc">GDB</small>&rsquo;s event processing.  Events
posted using <code class="code">post_event</code> will be run in the order in which they
were posted; however, there is no way to know when they will be
processed relative to other events inside <small class="sc">GDB</small>.
</p>
<p>Unlike most Python APIs in <small class="sc">GDB</small>, <code class="code">post_event</code> is
thread-safe.  For example:
</p>
<div class="example smallexample">
<pre class="example-preformatted">(gdb) python
&gt;import threading
&gt;
&gt;class Writer():
&gt; def __init__(self, message):
&gt;        self.message = message;
&gt; def __call__(self):
&gt;        gdb.write(self.message)
&gt;
&gt;class MyThread1 (threading.Thread):
&gt; def run (self):
&gt;        gdb.post_event(Writer(&quot;Hello &quot;))
&gt;
&gt;class MyThread2 (threading.Thread):
&gt; def run (self):
&gt;        gdb.post_event(Writer(&quot;World\n&quot;))
&gt;
&gt;MyThread1().start()
&gt;MyThread2().start()
&gt;end
(gdb) Hello World
</pre></div>
</dd></dl>


</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Exception-Handling.html">Exception Handling</a>, Previous: <a href="Basic-Python.html">Basic Python</a>, Up: <a href="Python-API.html">Python API</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Concept-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
