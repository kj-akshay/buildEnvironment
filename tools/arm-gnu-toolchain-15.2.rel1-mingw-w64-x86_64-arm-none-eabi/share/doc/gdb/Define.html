<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- Copyright Â© 1988-2024 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "Free Software" and "Free Software Needs
Free Documentation", with the Front-Cover Texts being "A GNU Manual,"
and with the Back-Cover Texts as in (a) below.

(a) The FSF's Back-Cover Text is: "You are free to copy and modify
this GNU Manual.  Buying copies from GNU Press supports the FSF in
developing GNU and promoting software freedom." -->
<title>Define (Debugging with GDB)</title>

<meta name="description" content="Define (Debugging with GDB)">
<meta name="keywords" content="Define (Debugging with GDB)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Concept-Index.html" rel="index" title="Concept Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Sequences.html" rel="up" title="Sequences">
<link href="Hooks.html" rel="next" title="Hooks">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
kbd.key {font-style: normal}
span:hover a.copiable-link {visibility: visible}
-->
</style>


</head>

<body lang="en">
<div class="subsection-level-extent" id="Define">
<div class="nav-panel">
<p>
Next: <a href="Hooks.html" accesskey="n" rel="next">User-defined Command Hooks</a>, Up: <a href="Sequences.html" accesskey="u" rel="up">Canned Sequences of Commands</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Concept-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h4 class="subsection" id="User_002ddefined-Commands"><span>23.1.1 User-defined Commands<a class="copiable-link" href="#User_002ddefined-Commands"> &para;</a></span></h4>

<a class="index-entry-id" id="index-user_002ddefined-command"></a>
<a class="index-entry-id" id="index-arguments_002c-to-user_002ddefined-commands"></a>
<p>A <em class="dfn">user-defined command</em> is a sequence of <small class="sc">GDB</small> commands to
which you assign a new name as a command.  This is done with the
<code class="code">define</code> command.
</p>
<p>User commands may accept an unlimited number of arguments separated by
whitespace.  Arguments are accessed within the user command via
<code class="code">$arg0&hellip;$argN</code>.  The arguments are text substitutions, so
they may reference variables, use complex expressions, or even perform
inferior functions calls.  Note, however, that this textual
substitution means that working with certain arguments is difficult.
For example, there is no way for the user to pass an argument
containing a space; and while stringifying an argument can be done
using an expression like <code class="code">&quot;$arg1&quot;</code>, this will fail if the
argument contains a quote.  For more complicated and robust commands,
we recommend writing them in Python; see <a class="ref" href="CLI-Commands-In-Python.html">CLI Commands In Python</a>.
</p>
<p>A trivial example:
</p>
<div class="example smallexample">
<pre class="example-preformatted">define adder
  print $arg0 + $arg1 + $arg2
end
</pre></div>

<p>To execute the command use:
</p>
<div class="example smallexample">
<pre class="example-preformatted">adder 1 2 3
</pre></div>

<p>This defines the command <code class="code">adder</code>, which prints the sum of
its three arguments.
</p>
<a class="index-entry-id" id="index-argument-count-in-user_002ddefined-commands"></a>
<a class="index-entry-id" id="index-how-many-arguments-_0028user_002ddefined-commands_0029"></a>
<p>In addition, <code class="code">$argc</code> may be used to find out how many arguments have
been passed.
</p>
<div class="example smallexample">
<pre class="example-preformatted">define adder
  if $argc == 2
    print $arg0 + $arg1
  end
  if $argc == 3
    print $arg0 + $arg1 + $arg2
  end
end
</pre></div>

<p>Combining with the <code class="code">eval</code> command (see <a class="pxref" href="Output.html#eval">eval</a>) makes it easier
to process a variable number of arguments:
</p>
<div class="example smallexample">
<pre class="example-preformatted">define adder
  set $i = 0
  set $sum = 0
  while $i &lt; $argc
    eval &quot;set $sum = $sum + $arg%d&quot;, $i
    set $i = $i + 1
  end
  print $sum
end
</pre></div>

<dl class="table">
<dt><a id="index-define"></a><span><code class="code">define <var class="var">commandname</var></code><a class="copiable-link" href="#index-define"> &para;</a></span></dt>
<dd><p>Define a command named <var class="var">commandname</var>.  If there is already a command
by that name, you are asked to confirm that you want to redefine it.
The argument <var class="var">commandname</var> may be a bare command name consisting of letters,
numbers, dashes, dots, and underscores.  It may also start with any
predefined or user-defined prefix command.
For example, &lsquo;<samp class="samp">define target my-target</samp>&rsquo; creates
a user-defined &lsquo;<samp class="samp">target my-target</samp>&rsquo; command.
</p>
<p>The definition of the command is made up of other <small class="sc">GDB</small> command lines,
which are given following the <code class="code">define</code> command.  The end of these
commands is marked by a line containing <code class="code">end</code>.
</p>
</dd>
<dt><a class="index-entry-id" id="index-end-_0028user_002ddefined-commands_0029"></a>
<a id="index-document"></a><span><code class="code">document <var class="var">commandname</var></code><a class="copiable-link" href="#index-document"> &para;</a></span></dt>
<dd><p>Document the user-defined command <var class="var">commandname</var>, so that it can be
accessed by <code class="code">help</code>.  The command <var class="var">commandname</var> must already be
defined.  This command reads lines of documentation just as <code class="code">define</code>
reads the lines of the command definition, ending with <code class="code">end</code>.
After the <code class="code">document</code> command is finished, <code class="code">help</code> on command
<var class="var">commandname</var> displays the documentation you have written.
</p>
<p>You may use the <code class="code">document</code> command again to change the
documentation of a command.  Redefining the command with <code class="code">define</code>
does not change the documentation.
</p>
<p>It is also possible to document user-defined aliases.  The alias documentation
will then be used by the <code class="code">help</code> and <code class="code">apropos</code> commands
instead of the documentation of the aliased command.
Documenting a user-defined alias is particularly useful when defining
an alias as a set of nested <code class="code">with</code> commands
(see <a class="pxref" href="Command-aliases-default-args.html">Default Arguments</a>).
</p>
</dd>
<dt><a id="index-define_002dprefix"></a><span><code class="code">define-prefix <var class="var">commandname</var></code><a class="copiable-link" href="#index-define_002dprefix"> &para;</a></span></dt>
<dd><p>Define or mark the command <var class="var">commandname</var> as a user-defined prefix
command.  Once marked, <var class="var">commandname</var> can be used as prefix command
by the  <code class="code">define</code> command.
Note that <code class="code">define-prefix</code> can be used with a not yet defined
<var class="var">commandname</var>.  In such a case, <var class="var">commandname</var> is defined as
an empty user-defined command.
In case you redefine a command that was marked as a user-defined
prefix command, the subcommands of the redefined command are kept
(and <small class="sc">GDB</small> indicates so to the user).
</p>
<p>Example:
</p><div class="example">
<pre class="example-preformatted">(gdb) define-prefix abc
(gdb) define-prefix abc def
(gdb) define abc def
Type commands for definition of &quot;abc def&quot;.
End with a line saying just &quot;end&quot;.
&gt;echo command initial def\n
&gt;end
(gdb) define abc def ghi
Type commands for definition of &quot;abc def ghi&quot;.
End with a line saying just &quot;end&quot;.
&gt;echo command ghi\n
&gt;end
(gdb) define abc def
Keeping subcommands of prefix command &quot;def&quot;.
Redefine command &quot;def&quot;? (y or n) y
Type commands for definition of &quot;abc def&quot;.
End with a line saying just &quot;end&quot;.
&gt;echo command def\n
&gt;end
(gdb) abc def ghi
command ghi
(gdb) abc def
command def
(gdb)
</pre></div>

</dd>
<dt><a class="index-entry-id" id="index-don_0027t-repeat-command"></a>
<a id="index-dont_002drepeat-1"></a><span><code class="code">dont-repeat</code><a class="copiable-link" href="#index-dont_002drepeat-1"> &para;</a></span></dt>
<dd><p>Used inside a user-defined command, this tells <small class="sc">GDB</small> that this
command should not be repeated when the user hits <kbd class="key">RET</kbd>
(see <a class="pxref" href="Command-Syntax.html">repeat last command</a>).
</p>
</dd>
<dt><a id="index-help-user_002ddefined"></a><span><code class="code">help user-defined</code><a class="copiable-link" href="#index-help-user_002ddefined"> &para;</a></span></dt>
<dd><p>List all user-defined commands and all python commands defined in class
COMMAND_USER.  The first line of the documentation or docstring is
included (if any).
</p>
</dd>
<dt><a id="index-show-user"></a><span><code class="code">show user</code><a class="copiable-link" href="#index-show-user"> &para;</a></span></dt>
<dt><code class="code">show user <var class="var">commandname</var></code></dt>
<dd><p>Display the <small class="sc">GDB</small> commands used to define <var class="var">commandname</var> (but
not its documentation).  If no <var class="var">commandname</var> is given, display the
definitions for all user-defined commands.
This does not work for user-defined python commands.
</p>
</dd>
<dt><a class="index-entry-id" id="index-show-max_002duser_002dcall_002ddepth"></a>
<a class="index-entry-id" id="index-set-max_002duser_002dcall_002ddepth"></a>
<a id="index-infinite-recursion-in-user_002ddefined-commands"></a><span><code class="code">show max-user-call-depth</code><a class="copiable-link" href="#index-infinite-recursion-in-user_002ddefined-commands"> &para;</a></span></dt>
<dt><code class="code">set max-user-call-depth</code></dt>
<dd><p>The value of <code class="code">max-user-call-depth</code> controls how many recursion
levels are allowed in user-defined commands before <small class="sc">GDB</small> suspects an
infinite recursion and aborts the command.
This does not apply to user-defined python commands.
</p></dd>
</dl>

<p>In addition to the above commands, user-defined commands frequently
use control flow commands, described in <a class="ref" href="Command-Files.html">Command Files</a>.
</p>
<p>When user-defined commands are executed, the
commands of the definition are not printed.  An error in any command
stops execution of the user-defined command.
</p>
<p>If used interactively, commands that would ask for confirmation proceed
without asking when used inside a user-defined command.  Many <small class="sc">GDB</small>
commands that normally print messages to say what they are doing omit the
messages when used in a user-defined command.
</p>
</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Hooks.html">User-defined Command Hooks</a>, Up: <a href="Sequences.html">Canned Sequences of Commands</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Concept-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
