<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- Copyright Â© 1988-2024 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "Free Software" and "Free Software Needs
Free Documentation", with the Front-Cover Texts being "A GNU Manual,"
and with the Back-Cover Texts as in (a) below.

(a) The FSF's Back-Cover Text is: "You are free to copy and modify
this GNU Manual.  Buying copies from GNU Press supports the FSF in
developing GNU and promoting software freedom." -->
<title>Core File Generation (Debugging with GDB)</title>

<meta name="description" content="Core File Generation (Debugging with GDB)">
<meta name="keywords" content="Core File Generation (Debugging with GDB)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Concept-Index.html" rel="index" title="Concept Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Data.html" rel="up" title="Data">
<link href="Character-Sets.html" rel="next" title="Character Sets">
<link href="Dump_002fRestore-Files.html" rel="prev" title="Dump/Restore Files">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
span:hover a.copiable-link {visibility: visible}
-->
</style>


</head>

<body lang="en">
<div class="section-level-extent" id="Core-File-Generation">
<div class="nav-panel">
<p>
Next: <a href="Character-Sets.html" accesskey="n" rel="next">Character Sets</a>, Previous: <a href="Dump_002fRestore-Files.html" accesskey="p" rel="prev">Copy Between Memory and a File</a>, Up: <a href="Data.html" accesskey="u" rel="up">Examining Data</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Concept-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h3 class="section" id="How-to-Produce-a-Core-File-from-Your-Program"><span>10.20 How to Produce a Core File from Your Program<a class="copiable-link" href="#How-to-Produce-a-Core-File-from-Your-Program"> &para;</a></span></h3>
<a class="index-entry-id" id="index-dump-core-from-inferior"></a>

<p>A <em class="dfn">core file</em> or <em class="dfn">core dump</em> is a file that records the memory
image of a running process and its process status (register values
etc.).  Its primary use is post-mortem debugging of a program that
crashed while it ran outside a debugger.  A program that crashes
automatically produces a core file, unless this feature is disabled by
the user.  See <a class="xref" href="Files.html">Commands to Specify Files</a>, for information on invoking <small class="sc">GDB</small> in
the post-mortem debugging mode.
</p>
<p>Occasionally, you may wish to produce a core file of the program you
are debugging in order to preserve a snapshot of its state.
<small class="sc">GDB</small> has a special command for that.
</p>
<dl class="table">
<dt><a class="index-entry-id" id="index-generate_002dcore_002dfile"></a>
<a id="index-gcore"></a><span><code class="code">generate-core-file [<var class="var">file</var>]</code><a class="copiable-link" href="#index-gcore"> &para;</a></span></dt>
<dt><code class="code">gcore [<var class="var">file</var>]</code></dt>
<dd><p>Produce a core dump of the inferior process.  The optional argument
<var class="var">file</var> specifies the file name where to put the core dump.  If not
specified, the file name defaults to <samp class="file">core.<var class="var">pid</var></samp>, where
<var class="var">pid</var> is the inferior process ID.
</p>
<p>If supported by the filesystem where the core is written to,
<small class="sc">GDB</small> generates a sparse core dump file.
</p>
<p>Note that this command is implemented only for some systems (as of
this writing, <small class="sc">GNU</small>/Linux, FreeBSD, Solaris, and S390).
</p>
<p>On <small class="sc">GNU</small>/Linux, this command can take into account the value of the
file <samp class="file">/proc/<var class="var">pid</var>/coredump_filter</samp> when generating the core
dump (see <a class="pxref" href="#set-use_002dcoredump_002dfilter">set use-coredump-filter</a>), and by default honors the
<code class="code">VM_DONTDUMP</code> flag for mappings where it is present in the file
<samp class="file">/proc/<var class="var">pid</var>/smaps</samp> (see <a class="pxref" href="#set-dump_002dexcluded_002dmappings">set dump-excluded-mappings</a>).
</p>
<a class="index-entry-id" id="index-set-use_002dcoredump_002dfilter"></a>
<a class="anchor" id="set-use_002dcoredump_002dfilter"></a></dd>
<dt><code class="code">set use-coredump-filter on</code></dt>
<dt><code class="code">set use-coredump-filter off</code></dt>
<dd><p>Enable or disable the use of the file
<samp class="file">/proc/<var class="var">pid</var>/coredump_filter</samp> when generating core dump
files.  This file is used by the Linux kernel to decide what types of
memory mappings will be dumped or ignored when generating a core dump
file.  <var class="var">pid</var> is the process ID of a currently running process.
</p>
<p>To make use of this feature, you have to write in the
<samp class="file">/proc/<var class="var">pid</var>/coredump_filter</samp> file a value, in hexadecimal,
which is a bit mask representing the memory mapping types.  If a bit
is set in the bit mask, then the memory mappings of the corresponding
types will be dumped; otherwise, they will be ignored.  This
configuration is inherited by child processes.  For more information
about the bits that can be set in the
<samp class="file">/proc/<var class="var">pid</var>/coredump_filter</samp> file, please refer to the
manpage of <code class="code">core(5)</code>.
</p>
<p>By default, this option is <code class="code">on</code>.  If this option is turned
<code class="code">off</code>, <small class="sc">GDB</small> does not read the <samp class="file">coredump_filter</samp> file
and instead uses the same default value as the Linux kernel in order
to decide which pages will be dumped in the core dump file.  This
value is currently <code class="code">0x33</code>, which means that bits <code class="code">0</code>
(anonymous private mappings), <code class="code">1</code> (anonymous shared mappings),
<code class="code">4</code> (ELF headers) and <code class="code">5</code> (private huge pages) are active.
This will cause these memory mappings to be dumped automatically.
</p>
<a class="index-entry-id" id="index-set-dump_002dexcluded_002dmappings"></a>
<a class="anchor" id="set-dump_002dexcluded_002dmappings"></a></dd>
<dt><code class="code">set dump-excluded-mappings on</code></dt>
<dt><code class="code">set dump-excluded-mappings off</code></dt>
<dd><p>If <code class="code">on</code> is specified, <small class="sc">GDB</small> will dump memory mappings
marked with the <code class="code">VM_DONTDUMP</code> flag.  This flag is represented in
the file <samp class="file">/proc/<var class="var">pid</var>/smaps</samp> with the acronym <code class="code">dd</code>.
</p>
<p>The default value is <code class="code">off</code>.
</p></dd>
</dl>

</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Character-Sets.html">Character Sets</a>, Previous: <a href="Dump_002fRestore-Files.html">Copy Between Memory and a File</a>, Up: <a href="Data.html">Examining Data</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Concept-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
