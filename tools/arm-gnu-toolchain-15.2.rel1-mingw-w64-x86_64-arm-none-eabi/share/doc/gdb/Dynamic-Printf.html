<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- Copyright Â© 1988-2024 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "Free Software" and "Free Software Needs
Free Documentation", with the Front-Cover Texts being "A GNU Manual,"
and with the Back-Cover Texts as in (a) below.

(a) The FSF's Back-Cover Text is: "You are free to copy and modify
this GNU Manual.  Buying copies from GNU Press supports the FSF in
developing GNU and promoting software freedom." -->
<title>Dynamic Printf (Debugging with GDB)</title>

<meta name="description" content="Dynamic Printf (Debugging with GDB)">
<meta name="keywords" content="Dynamic Printf (Debugging with GDB)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Concept-Index.html" rel="index" title="Concept Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Breakpoints.html" rel="up" title="Breakpoints">
<link href="Save-Breakpoints.html" rel="next" title="Save Breakpoints">
<link href="Break-Commands.html" rel="prev" title="Break Commands">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
span:hover a.copiable-link {visibility: visible}
-->
</style>


</head>

<body lang="en">
<div class="subsection-level-extent" id="Dynamic-Printf">
<div class="nav-panel">
<p>
Next: <a href="Save-Breakpoints.html" accesskey="n" rel="next">How to save breakpoints to a file</a>, Previous: <a href="Break-Commands.html" accesskey="p" rel="prev">Breakpoint Command Lists</a>, Up: <a href="Breakpoints.html" accesskey="u" rel="up">Breakpoints, Watchpoints, and Catchpoints</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Concept-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h4 class="subsection" id="Dynamic-Printf-1"><span>5.1.8 Dynamic Printf<a class="copiable-link" href="#Dynamic-Printf-1"> &para;</a></span></h4>

<a class="index-entry-id" id="index-dynamic-printf"></a>
<a class="index-entry-id" id="index-dprintf"></a>
<p>The dynamic printf command <code class="code">dprintf</code> combines a breakpoint with
formatted printing of your program&rsquo;s data to give you the effect of
inserting <code class="code">printf</code> calls into your program on-the-fly, without
having to recompile it.
</p>
<p>In its most basic form, the output goes to the GDB console.  However,
you can set the variable <code class="code">dprintf-style</code> for alternate handling.
For instance, you can ask to format the output by calling your
program&rsquo;s <code class="code">printf</code> function.  This has the advantage that the
characters go to the program&rsquo;s output device, so they can recorded in
redirects to files and so forth.
</p>
<p>If you are doing remote debugging with a stub or agent, you can also
ask to have the printf handled by the remote agent.  In addition to
ensuring that the output goes to the remote program&rsquo;s device along
with any other output the program might produce, you can also ask that
the dprintf remain active even after disconnecting from the remote
target.  Using the stub/agent is also more efficient, as it can do
everything without needing to communicate with <small class="sc">GDB</small>.
</p>
<dl class="table">
<dt><a id="index-dprintf-1"></a><span><code class="code">dprintf <var class="var">locspec</var>,<var class="var">template</var>,<var class="var">expression</var>[,<var class="var">expression</var>&hellip;]</code><a class="copiable-link" href="#index-dprintf-1"> &para;</a></span></dt>
<dd><p>Whenever execution reaches a code location that results from resolving
<var class="var">locspec</var>, print the values of one or more <var class="var">expressions</var> under
the control of the string <var class="var">template</var>.  To print several values,
separate them with commas.
</p>
</dd>
<dt><code class="code">set dprintf-style <var class="var">style</var></code></dt>
<dd><p>Set the dprintf output to be handled in one of several different
styles enumerated below.  A change of style affects all existing
dynamic printfs immediately.  (If you need individual control over the
print commands, simply define normal breakpoints with
explicitly-supplied command lists.)
</p>
<dl class="table">
<dt><a id="index-dprintf_002dstyle-gdb"></a><span><code class="code">gdb</code><a class="copiable-link" href="#index-dprintf_002dstyle-gdb"> &para;</a></span></dt>
<dd><p>Handle the output using the <small class="sc">GDB</small> <code class="code">printf</code> command.  When
using this style, it is possible to use the &lsquo;<samp class="samp">%V</samp>&rsquo; format specifier
(see <a class="pxref" href="Output.html#g_t_0025V-Format-Specifier">%V Format Specifier</a>).
</p>
</dd>
<dt><a id="index-dprintf_002dstyle-call"></a><span><code class="code">call</code><a class="copiable-link" href="#index-dprintf_002dstyle-call"> &para;</a></span></dt>
<dd><p>Handle the output by calling a function in your program (normally
<code class="code">printf</code>).  When using this style the supported format specifiers
depend entirely on the function being called.
</p>
<p>Most of <small class="sc">GDB</small>&rsquo;s format specifiers align with those supported by
the <code class="code">printf</code> function, however, <small class="sc">GDB</small>&rsquo;s &lsquo;<samp class="samp">%V</samp>&rsquo; format
specifier extension is not supported by <code class="code">printf</code>.  When using
&lsquo;<samp class="samp">call</samp>&rsquo; style dprintf, care should be taken to ensure that only
format specifiers supported by the output function are used, otherwise
the results will be undefined.
</p>
</dd>
<dt><a id="index-dprintf_002dstyle-agent"></a><span><code class="code">agent</code><a class="copiable-link" href="#index-dprintf_002dstyle-agent"> &para;</a></span></dt>
<dd><p>Have the remote debugging agent (such as <code class="code">gdbserver</code>) handle the
output itself.  This style is only available for agents that support
running commands on the target.  This style does not support the
&lsquo;<samp class="samp">%V</samp>&rsquo; format specifier.
</p></dd>
</dl>

</dd>
<dt><code class="code">set dprintf-function <var class="var">function</var></code></dt>
<dd><p>Set the function to call if the dprintf style is <code class="code">call</code>.  By
default its value is <code class="code">printf</code>.  You may set it to any expression
that <small class="sc">GDB</small> can evaluate to a function, as per the <code class="code">call</code>
command.
</p>
</dd>
<dt><code class="code">set dprintf-channel <var class="var">channel</var></code></dt>
<dd><p>Set a &ldquo;channel&rdquo; for dprintf.  If set to a non-empty value,
<small class="sc">GDB</small> will evaluate it as an expression and pass the result as
a first argument to the <code class="code">dprintf-function</code>, in the manner of
<code class="code">fprintf</code> and similar functions.  Otherwise, the dprintf format
string will be the first argument, in the manner of <code class="code">printf</code>.
</p>
<p>As an example, if you wanted <code class="code">dprintf</code> output to go to a logfile
that is a standard I/O stream assigned to the variable <code class="code">mylog</code>,
you could do the following:
</p>
<div class="example">
<pre class="example-preformatted">(gdb) set dprintf-style call
(gdb) set dprintf-function fprintf
(gdb) set dprintf-channel mylog
(gdb) dprintf 25,&quot;at line 25, glob=%d\n&quot;,glob
Dprintf 1 at 0x123456: file main.c, line 25.
(gdb) info break
1       dprintf        keep y   0x00123456 in main at main.c:25
        call (void) fprintf (mylog,&quot;at line 25, glob=%d\n&quot;,glob)
        continue
(gdb)
</pre></div>

<p>Note that the <code class="code">info break</code> displays the dynamic printf commands
as normal breakpoint commands; you can thus easily see the effect of
the variable settings.
</p>
</dd>
<dt><a id="index-set-disconnected_002ddprintf"></a><span><code class="code">set disconnected-dprintf on</code><a class="copiable-link" href="#index-set-disconnected_002ddprintf"> &para;</a></span></dt>
<dt><code class="code">set disconnected-dprintf off</code></dt>
<dd><p>Choose whether <code class="code">dprintf</code> commands should continue to run if
<small class="sc">GDB</small> has disconnected from the target.  This only applies
if the <code class="code">dprintf-style</code> is <code class="code">agent</code>.
</p>
</dd>
<dt><a id="index-show-disconnected_002ddprintf"></a><span><code class="code">show disconnected-dprintf off</code><a class="copiable-link" href="#index-show-disconnected_002ddprintf"> &para;</a></span></dt>
<dd><p>Show the current choice for disconnected <code class="code">dprintf</code>.
</p>
</dd>
</dl>

<p><small class="sc">GDB</small> does not check the validity of function and channel,
relying on you to supply values that are meaningful for the contexts
in which they are being used.  For instance, the function and channel
may be the values of local variables, but if that is the case, then
all enabled dynamic prints must be at locations within the scope of
those locals.  If evaluation fails, <small class="sc">GDB</small> will report an error.
</p>
</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Save-Breakpoints.html">How to save breakpoints to a file</a>, Previous: <a href="Break-Commands.html">Breakpoint Command Lists</a>, Up: <a href="Breakpoints.html">Breakpoints, Watchpoints, and Catchpoints</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Concept-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
