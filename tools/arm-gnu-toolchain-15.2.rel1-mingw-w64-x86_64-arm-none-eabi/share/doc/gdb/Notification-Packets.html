<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- Copyright Â© 1988-2024 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "Free Software" and "Free Software Needs
Free Documentation", with the Front-Cover Texts being "A GNU Manual,"
and with the Back-Cover Texts as in (a) below.

(a) The FSF's Back-Cover Text is: "You are free to copy and modify
this GNU Manual.  Buying copies from GNU Press supports the FSF in
developing GNU and promoting software freedom." -->
<title>Notification Packets (Debugging with GDB)</title>

<meta name="description" content="Notification Packets (Debugging with GDB)">
<meta name="keywords" content="Notification Packets (Debugging with GDB)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Concept-Index.html" rel="index" title="Concept Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Remote-Protocol.html" rel="up" title="Remote Protocol">
<link href="Remote-Non_002dStop.html" rel="next" title="Remote Non-Stop">
<link href="Interrupts.html" rel="prev" title="Interrupts">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
span:hover a.copiable-link {visibility: visible}
-->
</style>


</head>

<body lang="en">
<div class="section-level-extent" id="Notification-Packets">
<div class="nav-panel">
<p>
Next: <a href="Remote-Non_002dStop.html" accesskey="n" rel="next">Remote Protocol Support for Non-Stop Mode</a>, Previous: <a href="Interrupts.html" accesskey="p" rel="prev">Interrupts</a>, Up: <a href="Remote-Protocol.html" accesskey="u" rel="up"><small class="sc">GDB</small> Remote Serial Protocol</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Concept-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h3 class="section" id="Notification-Packets-1"><span>E.10 Notification Packets<a class="copiable-link" href="#Notification-Packets-1"> &para;</a></span></h3>
<a class="index-entry-id" id="index-notification-packets"></a>
<a class="index-entry-id" id="index-packets_002c-notification"></a>

<p>The <small class="sc">GDB</small> remote serial protocol includes <em class="dfn">notifications</em>,
packets that require no acknowledgment.  Both the GDB and the stub
may send notifications (although the only notifications defined at
present are sent by the stub).  Notifications carry information
without incurring the round-trip latency of an acknowledgment, and so
are useful for low-impact communications where occasional packet loss
is not a problem.
</p>
<p>A notification packet has the form &lsquo;<samp class="samp">% <var class="var">data</var> #
<var class="var">checksum</var></samp>&rsquo;, where <var class="var">data</var> is the content of the notification,
and <var class="var">checksum</var> is a checksum of <var class="var">data</var>, computed and formatted
as for ordinary <small class="sc">GDB</small> packets.  A notification&rsquo;s <var class="var">data</var>
never contains &lsquo;<samp class="samp">$</samp>&rsquo;, &lsquo;<samp class="samp">%</samp>&rsquo; or &lsquo;<samp class="samp">#</samp>&rsquo; characters.  Upon
receiving a notification, the recipient sends no &lsquo;<samp class="samp">+</samp>&rsquo; or &lsquo;<samp class="samp">-</samp>&rsquo;
to acknowledge the notification&rsquo;s receipt or to report its corruption.
</p>
<p>Every notification&rsquo;s <var class="var">data</var> begins with a name, which contains no
colon characters, followed by a colon character.
</p>
<p>Recipients should silently ignore corrupted notifications and
notifications they do not understand.  Recipients should restart
timeout periods on receipt of a well-formed notification, whether or
not they understand it.
</p>
<p>Senders should only send the notifications described here when this
protocol description specifies that they are permitted.  In the
future, we may extend the protocol to permit existing notifications in
new contexts; this rule helps older senders avoid confusing newer
recipients.
</p>
<p>(Older versions of <small class="sc">GDB</small> ignore bytes received until they see
the &lsquo;<samp class="samp">$</samp>&rsquo; byte that begins an ordinary packet, so new stubs may
transmit notifications without fear of confusing older clients.  There
are no notifications defined for <small class="sc">GDB</small> to send at the moment, but we
assume that most older stubs would ignore them, as well.)
</p>
<p>Each notification is comprised of three parts:
</p><dl class="table">
<dt>&lsquo;<samp class="samp"><var class="var">name</var>:<var class="var">event</var></samp>&rsquo;</dt>
<dd><p>The notification packet is sent by the side that initiates the
exchange (currently, only the stub does that), with <var class="var">event</var>
carrying the specific information about the notification, and
<var class="var">name</var> specifying the name of the notification.
</p></dd>
<dt>&lsquo;<samp class="samp"><var class="var">ack</var></samp>&rsquo;</dt>
<dd><p>The acknowledge sent by the other side, usually <small class="sc">GDB</small>, to
acknowledge the exchange and request the event.
</p></dd>
</dl>

<p>The purpose of an asynchronous notification mechanism is to report to
<small class="sc">GDB</small> that something interesting happened in the remote stub.
</p>
<p>The remote stub may send notification <var class="var">name</var>:<var class="var">event</var>
at any time, but <small class="sc">GDB</small> acknowledges the notification when
appropriate.  The notification event is pending before <small class="sc">GDB</small>
acknowledges.  Only one notification at a time may be pending; if
additional events occur before <small class="sc">GDB</small> has acknowledged the
previous notification, they must be queued by the stub for later
synchronous transmission in response to <var class="var">ack</var> packets from
<small class="sc">GDB</small>.  Because the notification mechanism is unreliable,
the stub is permitted to resend a notification if it believes
<small class="sc">GDB</small> may not have received it.
</p>
<p>Specifically, notifications may appear when <small class="sc">GDB</small> is not
otherwise reading input from the stub, or when <small class="sc">GDB</small> is
expecting to read a normal synchronous response or a
&lsquo;<samp class="samp">+</samp>&rsquo;/&lsquo;<samp class="samp">-</samp>&rsquo; acknowledgment to a packet it has sent.
Notification packets are distinct from any other communication from
the stub so there is no ambiguity.
</p>
<p>After receiving a notification, <small class="sc">GDB</small> shall acknowledge it by
sending a <var class="var">ack</var> packet as a regular, synchronous request to the
stub.  Such acknowledgment is not required to happen immediately, as
<small class="sc">GDB</small> is permitted to send other, unrelated packets to the
stub first, which the stub should process normally.
</p>
<p>Upon receiving a <var class="var">ack</var> packet, if the stub has other queued
events to report to <small class="sc">GDB</small>, it shall respond by sending a
normal <var class="var">event</var>.  <small class="sc">GDB</small> shall then send another <var class="var">ack</var>
packet to solicit further responses; again, it is permitted to send
other, unrelated packets as well which the stub should process
normally.
</p>
<p>If the stub receives a <var class="var">ack</var> packet and there are no additional
<var class="var">event</var> to report, the stub shall return an &lsquo;<samp class="samp">OK</samp>&rsquo; response.
At this point, <small class="sc">GDB</small> has finished processing a notification
and the stub has completed sending any queued events.  <small class="sc">GDB</small>
won&rsquo;t accept any new notifications until the final &lsquo;<samp class="samp">OK</samp>&rsquo; is
received .  If further notification events occur, the stub shall send
a new notification, <small class="sc">GDB</small> shall accept the notification, and
the process shall be repeated.
</p>
<p>The process of asynchronous notification can be illustrated by the
following example:
</p><div class="example smallexample">
<pre class="example-preformatted">&lt;- <code class="code">%Stop:T0505:98e7ffbf;04:4ce6ffbf;08:b1b6e54c;thread:p7526.7526;core:0;</code>
<code class="code">...</code>
-&gt; <code class="code">vStopped</code>
&lt;- <code class="code">T0505:68f37db7;04:40f37db7;08:63850408;thread:p7526.7528;core:0;</code>
-&gt; <code class="code">vStopped</code>
&lt;- <code class="code">T0505:68e3fdb6;04:40e3fdb6;08:63850408;thread:p7526.7529;core:0;</code>
-&gt; <code class="code">vStopped</code>
&lt;- <code class="code">OK</code>
</pre></div>

<p>The following notifications are defined:
</p><table class="multitable">
<tbody><tr><td width="12%">Notification</td><td width="12%">Ack</td><td width="38%">Event</td><td width="38%">Description</td></tr>
<tr><td width="12%">Stop</td><td width="12%">vStopped</td><td width="38%"><var class="var">reply</var>.  The <var class="var">reply</var> has the form of a stop reply, as
described in <a class="ref" href="Stop-Reply-Packets.html">Stop Reply Packets</a>.  Refer to <a class="ref" href="Remote-Non_002dStop.html">Remote Protocol Support for Non-Stop Mode</a>,
for information on how these notifications are acknowledged by 
<small class="sc">GDB</small>.</td><td width="38%">Report an asynchronous stop event in non-stop mode.</td></tr>
</tbody>
</table>

</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Remote-Non_002dStop.html">Remote Protocol Support for Non-Stop Mode</a>, Previous: <a href="Interrupts.html">Interrupts</a>, Up: <a href="Remote-Protocol.html"><small class="sc">GDB</small> Remote Serial Protocol</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Concept-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
