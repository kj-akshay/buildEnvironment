<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- Copyright Â© 1988-2024 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "Free Software" and "Free Software Needs
Free Documentation", with the Front-Cover Texts being "A GNU Manual,"
and with the Back-Cover Texts as in (a) below.

(a) The FSF's Back-Cover Text is: "You are free to copy and modify
this GNU Manual.  Buying copies from GNU Press supports the FSF in
developing GNU and promoting software freedom." -->
<title>CLI Commands In Python (Debugging with GDB)</title>

<meta name="description" content="CLI Commands In Python (Debugging with GDB)">
<meta name="keywords" content="CLI Commands In Python (Debugging with GDB)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Concept-Index.html" rel="index" title="Concept Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Python-API.html" rel="up" title="Python API">
<link href="GDB_002fMI-Commands-In-Python.html" rel="next" title="GDB/MI Commands In Python">
<link href="Recordings-In-Python.html" rel="prev" title="Recordings In Python">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
kbd.kbd {font-style: oblique}
kbd.key {font-style: normal}
span.r {font-family: initial; font-weight: normal; font-style: normal}
span:hover a.copiable-link {visibility: visible}
strong.def-name {font-family: monospace; font-weight: bold; font-size: larger}
ul.mark-bullet {list-style-type: disc}
-->
</style>


</head>

<body lang="en">
<div class="subsubsection-level-extent" id="CLI-Commands-In-Python">
<div class="nav-panel">
<p>
Next: <a href="GDB_002fMI-Commands-In-Python.html" accesskey="n" rel="next"><small class="sc">GDB/MI</small> Commands In Python</a>, Previous: <a href="Recordings-In-Python.html" accesskey="p" rel="prev">Recordings In Python</a>, Up: <a href="Python-API.html" accesskey="u" rel="up">Python API</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Concept-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h4 class="subsubsection" id="CLI-Commands-In-Python-1"><span>23.3.2.21 CLI Commands In Python<a class="copiable-link" href="#CLI-Commands-In-Python-1"> &para;</a></span></h4>

<a class="index-entry-id" id="index-CLI-commands-in-python"></a>
<a class="index-entry-id" id="index-commands-in-python_002c-CLI"></a>
<a class="index-entry-id" id="index-python-commands_002c-CLI"></a>
<p>You can implement new <small class="sc">GDB</small> CLI commands in Python.  A CLI
command is implemented using an instance of the <code class="code">gdb.Command</code>
class, most commonly using a subclass.
</p>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-Command_002e_005f_005finit_005f_005f"><span class="category-def">Function: </span><span><strong class="def-name">Command.__init__</strong> <var class="def-var-arguments">(name, command_class <span class="r">[</span>, completer_class <span class="r">[</span>, prefix<span class="r">]]</span>)</var><a class="copiable-link" href="#index-Command_002e_005f_005finit_005f_005f"> &para;</a></span></dt>
<dd><p>The object initializer for <code class="code">Command</code> registers the new command
with <small class="sc">GDB</small>.  This initializer is normally invoked from the
subclass&rsquo; own <code class="code">__init__</code> method.
</p>
<p><var class="var">name</var> is the name of the command.  If <var class="var">name</var> consists of
multiple words, then the initial words are looked for as prefix
commands.  In this case, if one of the prefix commands does not exist,
an exception is raised.
</p>
<p>There is no support for multi-line commands.
</p>
<p><var class="var">command_class</var> should be one of the &lsquo;<samp class="samp">COMMAND_</samp>&rsquo; constants
defined below.  This argument tells <small class="sc">GDB</small> how to categorize the
new command in the help system.
</p>
<p><var class="var">completer_class</var> is an optional argument.  If given, it should be
one of the &lsquo;<samp class="samp">COMPLETE_</samp>&rsquo; constants defined below.  This argument
tells <small class="sc">GDB</small> how to perform completion for this command.  If not
given, <small class="sc">GDB</small> will attempt to complete using the object&rsquo;s
<code class="code">complete</code> method (see below); if no such method is found, an
error will occur when completion is attempted.
</p>
<p><var class="var">prefix</var> is an optional argument.  If <code class="code">True</code>, then the new
command is a prefix command; sub-commands of this command may be
registered.
</p>
<p>The help text for the new command is taken from the Python
documentation string for the command&rsquo;s class, if there is one.  If no
documentation string is provided, the default value &ldquo;This command is
not documented.&rdquo; is used.
</p></dd></dl>

<a class="index-entry-id" id="index-don_0027t-repeat-Python-command"></a>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-Command_002edont_005frepeat"><span class="category-def">Function: </span><span><strong class="def-name">Command.dont_repeat</strong> <var class="def-var-arguments">()</var><a class="copiable-link" href="#index-Command_002edont_005frepeat"> &para;</a></span></dt>
<dd><p>By default, a <small class="sc">GDB</small> command is repeated when the user enters a
blank line at the command prompt.  A command can suppress this
behavior by invoking the <code class="code">dont_repeat</code> method at some point in
its <code class="code">invoke</code> method (normally this is done early in case of
exception).  This is similar to the user command <code class="code">dont-repeat</code>,
see <a class="ref" href="Define.html">dont-repeat</a>.
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-Command_002einvoke"><span class="category-def">Function: </span><span><strong class="def-name">Command.invoke</strong> <var class="def-var-arguments">(argument, from_tty)</var><a class="copiable-link" href="#index-Command_002einvoke"> &para;</a></span></dt>
<dd><p>This method is called by <small class="sc">GDB</small> when this command is invoked.
</p>
<p><var class="var">argument</var> is a string.  It is the argument to the command, after
leading and trailing whitespace has been stripped.
</p>
<p><var class="var">from_tty</var> is a boolean argument.  When true, this means that the
command was entered by the user at the terminal; when false it means
that the command came from elsewhere.
</p>
<p>If this method throws an exception, it is turned into a <small class="sc">GDB</small>
<code class="code">error</code> call.  Otherwise, the return value is ignored.
</p>
<a class="index-entry-id" id="index-gdb_002estring_005fto_005fargv"></a>
<p>To break <var class="var">argument</var> up into an argv-like string use
<code class="code">gdb.string_to_argv</code>.  This function behaves identically to
<small class="sc">GDB</small>&rsquo;s internal argument lexer <code class="code">buildargv</code>.
It is recommended to use this for consistency.
Arguments are separated by spaces and may be quoted.
Example:
</p>
<div class="example smallexample">
<pre class="example-preformatted">print gdb.string_to_argv (&quot;1 2\ \\\&quot;3 '4 \&quot;5' \&quot;6 '7\&quot;&quot;)
['1', '2 &quot;3', '4 &quot;5', &quot;6 '7&quot;]
</pre></div>

</dd></dl>

<a class="index-entry-id" id="index-completion-of-Python-commands"></a>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-Command_002ecomplete"><span class="category-def">Function: </span><span><strong class="def-name">Command.complete</strong> <var class="def-var-arguments">(text, word)</var><a class="copiable-link" href="#index-Command_002ecomplete"> &para;</a></span></dt>
<dd><p>This method is called by <small class="sc">GDB</small> when the user attempts
completion on this command.  All forms of completion are handled by
this method, that is, the <kbd class="key">TAB</kbd> and <kbd class="key">M-?</kbd> key bindings
(see <a class="pxref" href="Completion.html">Command Completion</a>), and the <code class="code">complete</code> command (see <a class="pxref" href="Help.html">complete</a>).
</p>
<p>The arguments <var class="var">text</var> and <var class="var">word</var> are both strings; <var class="var">text</var>
holds the complete command line up to the cursor&rsquo;s location, while
<var class="var">word</var> holds the last word of the command line; this is computed
using a word-breaking heuristic.
</p>
<p>The <code class="code">complete</code> method can return several values:
</p><ul class="itemize mark-bullet">
<li>If the return value is a sequence, the contents of the sequence are
used as the completions.  It is up to <code class="code">complete</code> to ensure that the
contents actually do complete the word.  A zero-length sequence is
allowed, it means that there were no completions available.  Only
string elements of the sequence are used; other elements in the
sequence are ignored.

</li><li>If the return value is one of the &lsquo;<samp class="samp">COMPLETE_</samp>&rsquo; constants defined
below, then the corresponding <small class="sc">GDB</small>-internal completion
function is invoked, and its result is used.

</li><li>All other results are treated as though there were no available
completions.
</li></ul>
</dd></dl>

<p>When a new command is registered, it must be declared as a member of
some general class of commands.  This is used to classify top-level
commands in the on-line help system; note that prefix commands are not
listed under their own category but rather that of their top-level
command.  The available classifications are represented by constants
defined in the <code class="code">gdb</code> module:
</p>
<dl class="table">
<dt><a class="index-entry-id" id="index-gdb_002eCOMMAND_005fNONE"></a>
<a id="index-COMMAND_005fNONE"></a><span><code class="code">gdb.COMMAND_NONE</code><a class="copiable-link" href="#index-COMMAND_005fNONE"> &para;</a></span></dt>
<dd><p>The command does not belong to any particular class.  A command in
this category will not be displayed in any of the help categories.
</p>
</dd>
<dt><a class="index-entry-id" id="index-gdb_002eCOMMAND_005fRUNNING"></a>
<a id="index-COMMAND_005fRUNNING"></a><span><code class="code">gdb.COMMAND_RUNNING</code><a class="copiable-link" href="#index-COMMAND_005fRUNNING"> &para;</a></span></dt>
<dd><p>The command is related to running the inferior.  For example,
<code class="code">start</code>, <code class="code">step</code>, and <code class="code">continue</code> are in this category.
Type <kbd class="kbd">help running</kbd> at the <small class="sc">GDB</small> prompt to see a list of
commands in this category.
</p>
</dd>
<dt><a class="index-entry-id" id="index-gdb_002eCOMMAND_005fDATA"></a>
<a id="index-COMMAND_005fDATA"></a><span><code class="code">gdb.COMMAND_DATA</code><a class="copiable-link" href="#index-COMMAND_005fDATA"> &para;</a></span></dt>
<dd><p>The command is related to data or variables.  For example,
<code class="code">call</code>, <code class="code">find</code>, and <code class="code">print</code> are in this category.  Type
<kbd class="kbd">help data</kbd> at the <small class="sc">GDB</small> prompt to see a list of commands
in this category.
</p>
</dd>
<dt><a class="index-entry-id" id="index-gdb_002eCOMMAND_005fSTACK"></a>
<a id="index-COMMAND_005fSTACK"></a><span><code class="code">gdb.COMMAND_STACK</code><a class="copiable-link" href="#index-COMMAND_005fSTACK"> &para;</a></span></dt>
<dd><p>The command has to do with manipulation of the stack.  For example,
<code class="code">backtrace</code>, <code class="code">frame</code>, and <code class="code">return</code> are in this
category.  Type <kbd class="kbd">help stack</kbd> at the <small class="sc">GDB</small> prompt to see a
list of commands in this category.
</p>
</dd>
<dt><a class="index-entry-id" id="index-gdb_002eCOMMAND_005fFILES"></a>
<a id="index-COMMAND_005fFILES"></a><span><code class="code">gdb.COMMAND_FILES</code><a class="copiable-link" href="#index-COMMAND_005fFILES"> &para;</a></span></dt>
<dd><p>This class is used for file-related commands.  For example,
<code class="code">file</code>, <code class="code">list</code> and <code class="code">section</code> are in this category.
Type <kbd class="kbd">help files</kbd> at the <small class="sc">GDB</small> prompt to see a list of
commands in this category.
</p>
</dd>
<dt><a class="index-entry-id" id="index-gdb_002eCOMMAND_005fSUPPORT"></a>
<a id="index-COMMAND_005fSUPPORT"></a><span><code class="code">gdb.COMMAND_SUPPORT</code><a class="copiable-link" href="#index-COMMAND_005fSUPPORT"> &para;</a></span></dt>
<dd><p>This should be used for &ldquo;support facilities&rdquo;, generally meaning
things that are useful to the user when interacting with <small class="sc">GDB</small>,
but not related to the state of the inferior.  For example,
<code class="code">help</code>, <code class="code">make</code>, and <code class="code">shell</code> are in this category.  Type
<kbd class="kbd">help support</kbd> at the <small class="sc">GDB</small> prompt to see a list of
commands in this category.
</p>
</dd>
<dt><a class="index-entry-id" id="index-gdb_002eCOMMAND_005fSTATUS"></a>
<a id="index-COMMAND_005fSTATUS"></a><span><code class="code">gdb.COMMAND_STATUS</code><a class="copiable-link" href="#index-COMMAND_005fSTATUS"> &para;</a></span></dt>
<dd><p>The command is an &lsquo;<samp class="samp">info</samp>&rsquo;-related command, that is, related to the
state of <small class="sc">GDB</small> itself.  For example, <code class="code">info</code>, <code class="code">macro</code>,
and <code class="code">show</code> are in this category.  Type <kbd class="kbd">help status</kbd> at the
<small class="sc">GDB</small> prompt to see a list of commands in this category.
</p>
</dd>
<dt><a class="index-entry-id" id="index-gdb_002eCOMMAND_005fBREAKPOINTS"></a>
<a id="index-COMMAND_005fBREAKPOINTS"></a><span><code class="code">gdb.COMMAND_BREAKPOINTS</code><a class="copiable-link" href="#index-COMMAND_005fBREAKPOINTS"> &para;</a></span></dt>
<dd><p>The command has to do with breakpoints.  For example, <code class="code">break</code>,
<code class="code">clear</code>, and <code class="code">delete</code> are in this category.  Type <kbd class="kbd">help
breakpoints</kbd> at the <small class="sc">GDB</small> prompt to see a list of commands in
this category.
</p>
</dd>
<dt><a class="index-entry-id" id="index-gdb_002eCOMMAND_005fTRACEPOINTS"></a>
<a id="index-COMMAND_005fTRACEPOINTS"></a><span><code class="code">gdb.COMMAND_TRACEPOINTS</code><a class="copiable-link" href="#index-COMMAND_005fTRACEPOINTS"> &para;</a></span></dt>
<dd><p>The command has to do with tracepoints.  For example, <code class="code">trace</code>,
<code class="code">actions</code>, and <code class="code">tfind</code> are in this category.  Type
<kbd class="kbd">help tracepoints</kbd> at the <small class="sc">GDB</small> prompt to see a list of
commands in this category.
</p>
</dd>
<dt><a class="index-entry-id" id="index-gdb_002eCOMMAND_005fTUI"></a>
<a id="index-COMMAND_005fTUI"></a><span><code class="code">gdb.COMMAND_TUI</code><a class="copiable-link" href="#index-COMMAND_005fTUI"> &para;</a></span></dt>
<dd><p>The command has to do with the text user interface (see <a class="pxref" href="TUI.html"><small class="sc">GDB</small> Text User Interface</a>).
Type <kbd class="kbd">help tui</kbd> at the <small class="sc">GDB</small> prompt to see a list of
commands in this category.
</p>
</dd>
<dt><a class="index-entry-id" id="index-gdb_002eCOMMAND_005fUSER"></a>
<a id="index-COMMAND_005fUSER"></a><span><code class="code">gdb.COMMAND_USER</code><a class="copiable-link" href="#index-COMMAND_005fUSER"> &para;</a></span></dt>
<dd><p>The command is a general purpose command for the user, and typically
does not fit in one of the other categories.
Type <kbd class="kbd">help user-defined</kbd> at the <small class="sc">GDB</small> prompt to see
a list of commands in this category, as well as the list of gdb macros
(see <a class="pxref" href="Sequences.html">Canned Sequences of Commands</a>).
</p>
</dd>
<dt><a class="index-entry-id" id="index-gdb_002eCOMMAND_005fOBSCURE"></a>
<a id="index-COMMAND_005fOBSCURE"></a><span><code class="code">gdb.COMMAND_OBSCURE</code><a class="copiable-link" href="#index-COMMAND_005fOBSCURE"> &para;</a></span></dt>
<dd><p>The command is only used in unusual circumstances, or is not of
general interest to users.  For example, <code class="code">checkpoint</code>,
<code class="code">fork</code>, and <code class="code">stop</code> are in this category.  Type <kbd class="kbd">help
obscure</kbd> at the <small class="sc">GDB</small> prompt to see a list of commands in this
category.
</p>
</dd>
<dt><a class="index-entry-id" id="index-gdb_002eCOMMAND_005fMAINTENANCE"></a>
<a id="index-COMMAND_005fMAINTENANCE"></a><span><code class="code">gdb.COMMAND_MAINTENANCE</code><a class="copiable-link" href="#index-COMMAND_005fMAINTENANCE"> &para;</a></span></dt>
<dd><p>The command is only useful to <small class="sc">GDB</small> maintainers.  The
<code class="code">maintenance</code> and <code class="code">flushregs</code> commands are in this category.
Type <kbd class="kbd">help internals</kbd> at the <small class="sc">GDB</small> prompt to see a list of
commands in this category.
</p></dd>
</dl>

<p>A new command can use a predefined completion function, either by
specifying it via an argument at initialization, or by returning it
from the <code class="code">complete</code> method.  These predefined completion
constants are all defined in the <code class="code">gdb</code> module:
</p>
<dl class="vtable">
<dt><a class="index-entry-id" id="index-COMPLETE_005fNONE"></a>
<a id="index-gdb_002eCOMPLETE_005fNONE"></a><span><code class="code">gdb.COMPLETE_NONE</code><a class="copiable-link" href="#index-gdb_002eCOMPLETE_005fNONE"> &para;</a></span></dt>
<dd><p>This constant means that no completion should be done.
</p>
</dd>
<dt><a class="index-entry-id" id="index-COMPLETE_005fFILENAME"></a>
<a id="index-gdb_002eCOMPLETE_005fFILENAME"></a><span><code class="code">gdb.COMPLETE_FILENAME</code><a class="copiable-link" href="#index-gdb_002eCOMPLETE_005fFILENAME"> &para;</a></span></dt>
<dd><p>This constant means that filename completion should be performed.
</p>
</dd>
<dt><a class="index-entry-id" id="index-COMPLETE_005fLOCATION"></a>
<a id="index-gdb_002eCOMPLETE_005fLOCATION"></a><span><code class="code">gdb.COMPLETE_LOCATION</code><a class="copiable-link" href="#index-gdb_002eCOMPLETE_005fLOCATION"> &para;</a></span></dt>
<dd><p>This constant means that location completion should be done.
See <a class="xref" href="Location-Specifications.html">Location Specifications</a>.
</p>
</dd>
<dt><a class="index-entry-id" id="index-COMPLETE_005fCOMMAND"></a>
<a id="index-gdb_002eCOMPLETE_005fCOMMAND"></a><span><code class="code">gdb.COMPLETE_COMMAND</code><a class="copiable-link" href="#index-gdb_002eCOMPLETE_005fCOMMAND"> &para;</a></span></dt>
<dd><p>This constant means that completion should examine <small class="sc">GDB</small>
command names.
</p>
</dd>
<dt><a class="index-entry-id" id="index-COMPLETE_005fSYMBOL"></a>
<a id="index-gdb_002eCOMPLETE_005fSYMBOL"></a><span><code class="code">gdb.COMPLETE_SYMBOL</code><a class="copiable-link" href="#index-gdb_002eCOMPLETE_005fSYMBOL"> &para;</a></span></dt>
<dd><p>This constant means that completion should be done using symbol names
as the source.
</p>
</dd>
<dt><a class="index-entry-id" id="index-COMPLETE_005fEXPRESSION"></a>
<a id="index-gdb_002eCOMPLETE_005fEXPRESSION"></a><span><code class="code">gdb.COMPLETE_EXPRESSION</code><a class="copiable-link" href="#index-gdb_002eCOMPLETE_005fEXPRESSION"> &para;</a></span></dt>
<dd><p>This constant means that completion should be done on expressions.
Often this means completing on symbol names, but some language
parsers also have support for completing on field names.
</p></dd>
</dl>

<p>The following code snippet shows how a trivial CLI command can be
implemented in Python:
</p>
<div class="example smallexample">
<pre class="example-preformatted">class HelloWorld (gdb.Command):
  &quot;&quot;&quot;Greet the whole world.&quot;&quot;&quot;

  def __init__ (self):
    super (HelloWorld, self).__init__ (&quot;hello-world&quot;, gdb.COMMAND_USER)

  def invoke (self, arg, from_tty):
    print (&quot;Hello, World!&quot;)

HelloWorld ()
</pre></div>

<p>The last line instantiates the class, and is necessary to trigger the
registration of the command with <small class="sc">GDB</small>.  Depending on how the
Python code is read into <small class="sc">GDB</small>, you may need to import the
<code class="code">gdb</code> module explicitly.
</p>
</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="GDB_002fMI-Commands-In-Python.html"><small class="sc">GDB/MI</small> Commands In Python</a>, Previous: <a href="Recordings-In-Python.html">Recordings In Python</a>, Up: <a href="Python-API.html">Python API</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Concept-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
