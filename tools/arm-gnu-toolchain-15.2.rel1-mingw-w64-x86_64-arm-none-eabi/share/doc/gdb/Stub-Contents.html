<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- Copyright Â© 1988-2024 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "Free Software" and "Free Software Needs
Free Documentation", with the Front-Cover Texts being "A GNU Manual,"
and with the Back-Cover Texts as in (a) below.

(a) The FSF's Back-Cover Text is: "You are free to copy and modify
this GNU Manual.  Buying copies from GNU Press supports the FSF in
developing GNU and promoting software freedom." -->
<title>Stub Contents (Debugging with GDB)</title>

<meta name="description" content="Stub Contents (Debugging with GDB)">
<meta name="keywords" content="Stub Contents (Debugging with GDB)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Concept-Index.html" rel="index" title="Concept Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Remote-Stub.html" rel="up" title="Remote Stub">
<link href="Bootstrapping.html" rel="next" title="Bootstrapping">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
span:hover a.copiable-link {visibility: visible}
-->
</style>


</head>

<body lang="en">
<div class="subsection-level-extent" id="Stub-Contents">
<div class="nav-panel">
<p>
Next: <a href="Bootstrapping.html" accesskey="n" rel="next">What You Must Do for the Stub</a>, Up: <a href="Remote-Stub.html" accesskey="u" rel="up">Implementing a Remote Stub</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Concept-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h4 class="subsection" id="What-the-Stub-Can-Do-for-You"><span>20.5.1 What the Stub Can Do for You<a class="copiable-link" href="#What-the-Stub-Can-Do-for-You"> &para;</a></span></h4>

<a class="index-entry-id" id="index-remote-serial-stub"></a>
<p>The debugging stub for your architecture supplies these three
subroutines:
</p>
<dl class="table">
<dt><a class="index-entry-id" id="index-set_005fdebug_005ftraps"></a>
<a id="index-remote-serial-stub_002c-initialization"></a><span><code class="code">set_debug_traps</code><a class="copiable-link" href="#index-remote-serial-stub_002c-initialization"> &para;</a></span></dt>
<dd><p>This routine arranges for <code class="code">handle_exception</code> to run when your
program stops.  You must call this subroutine explicitly in your
program&rsquo;s startup code.
</p>
</dd>
<dt><a class="index-entry-id" id="index-handle_005fexception"></a>
<a id="index-remote-serial-stub_002c-main-routine"></a><span><code class="code">handle_exception</code><a class="copiable-link" href="#index-remote-serial-stub_002c-main-routine"> &para;</a></span></dt>
<dd><p>This is the central workhorse, but your program never calls it
explicitly&mdash;the setup code arranges for <code class="code">handle_exception</code> to
run when a trap is triggered.
</p>
<p><code class="code">handle_exception</code> takes control when your program stops during
execution (for example, on a breakpoint), and mediates communications
with <small class="sc">GDB</small> on the host machine.  This is where the communications
protocol is implemented; <code class="code">handle_exception</code> acts as the <small class="sc">GDB</small>
representative on the target machine.  It begins by sending summary
information on the state of your program, then continues to execute,
retrieving and transmitting any information <small class="sc">GDB</small> needs, until you
execute a <small class="sc">GDB</small> command that makes your program resume; at that point,
<code class="code">handle_exception</code> returns control to your own code on the target
machine.
</p>
</dd>
<dt><a id="index-breakpoint-subroutine_002c-remote"></a><span><code class="code">breakpoint</code><a class="copiable-link" href="#index-breakpoint-subroutine_002c-remote"> &para;</a></span></dt>
<dd><p>Use this auxiliary subroutine to make your program contain a
breakpoint.  Depending on the particular situation, this may be the only
way for <small class="sc">GDB</small> to get control.  For instance, if your target
machine has some sort of interrupt button, you won&rsquo;t need to call this;
pressing the interrupt button transfers control to
<code class="code">handle_exception</code>&mdash;in effect, to <small class="sc">GDB</small>.  On some machines,
simply receiving characters on the serial port may also trigger a trap;
again, in that situation, you don&rsquo;t need to call <code class="code">breakpoint</code> from
your own program&mdash;simply running &lsquo;<samp class="samp">target remote</samp>&rsquo; from the host
<small class="sc">GDB</small> session gets control.
</p>
<p>Call <code class="code">breakpoint</code> if none of these is true, or if you simply want
to make certain your program stops at a predetermined point for the
start of your debugging session.
</p></dd>
</dl>

</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Bootstrapping.html">What You Must Do for the Stub</a>, Up: <a href="Remote-Stub.html">Implementing a Remote Stub</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Concept-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
