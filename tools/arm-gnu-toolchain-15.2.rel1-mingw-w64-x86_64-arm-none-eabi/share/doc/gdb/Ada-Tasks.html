<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- Copyright Â© 1988-2024 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "Free Software" and "Free Software Needs
Free Documentation", with the Front-Cover Texts being "A GNU Manual,"
and with the Back-Cover Texts as in (a) below.

(a) The FSF's Back-Cover Text is: "You are free to copy and modify
this GNU Manual.  Buying copies from GNU Press supports the FSF in
developing GNU and promoting software freedom." -->
<title>Ada Tasks (Debugging with GDB)</title>

<meta name="description" content="Ada Tasks (Debugging with GDB)">
<meta name="keywords" content="Ada Tasks (Debugging with GDB)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Concept-Index.html" rel="index" title="Concept Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Ada.html" rel="up" title="Ada">
<link href="Ada-Tasks-and-Core-Files.html" rel="next" title="Ada Tasks and Core Files">
<link href="Ada-Exceptions.html" rel="prev" title="Ada Exceptions">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
span:hover a.copiable-link {visibility: visible}
-->
</style>


</head>

<body lang="en">
<div class="subsubsection-level-extent" id="Ada-Tasks">
<div class="nav-panel">
<p>
Next: <a href="Ada-Tasks-and-Core-Files.html" accesskey="n" rel="next">Tasking Support when Debugging Core Files</a>, Previous: <a href="Ada-Exceptions.html" accesskey="p" rel="prev">Ada Exceptions</a>, Up: <a href="Ada.html" accesskey="u" rel="up">Ada</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Concept-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h4 class="subsubsection" id="Extensions-for-Ada-Tasks"><span>15.4.10.7 Extensions for Ada Tasks<a class="copiable-link" href="#Extensions-for-Ada-Tasks"> &para;</a></span></h4>
<a class="index-entry-id" id="index-Ada_002c-tasking"></a>

<p>Support for Ada tasks is analogous to that for threads (see <a class="pxref" href="Threads.html">Debugging Programs with Multiple Threads</a>).
<small class="sc">GDB</small> provides the following task-related commands:
</p>
<dl class="table">
<dt><a id="index-info-tasks"></a><span><code class="code">info tasks</code><a class="copiable-link" href="#index-info-tasks"> &para;</a></span></dt>
<dd><p>This command shows a list of current Ada tasks, as in the following example:
</p>

<div class="example smallexample">
<pre class="example-preformatted">(gdb) info tasks
  ID       TID P-ID Pri State                 Name
   1   8088000   0   15 Child Activation Wait main_task
   2   80a4000   1   15 Accept Statement      b
   3   809a800   1   15 Child Activation Wait a
*  4   80ae800   3   15 Runnable              c

</pre></div>

<p>In this listing, the asterisk before the last task indicates it to be the
task currently being inspected.
</p>
<dl class="table">
<dt>ID</dt>
<dd><p>Represents <small class="sc">GDB</small>&rsquo;s internal task number.
</p>
</dd>
<dt>TID</dt>
<dd><p>The Ada task ID.
</p>
</dd>
<dt>P-ID</dt>
<dd><p>The parent&rsquo;s task ID (<small class="sc">GDB</small>&rsquo;s internal task number).
</p>
</dd>
<dt>Pri</dt>
<dd><p>The base priority of the task.
</p>
</dd>
<dt>State</dt>
<dd><p>Current state of the task.
</p>
<dl class="table">
<dt><code class="code">Unactivated</code></dt>
<dd><p>The task has been created but has not been activated.  It cannot be
executing.
</p>
</dd>
<dt><code class="code">Runnable</code></dt>
<dd><p>The task is not blocked for any reason known to Ada.  (It may be waiting
for a mutex, though.) It is conceptually &quot;executing&quot; in normal mode.
</p>
</dd>
<dt><code class="code">Terminated</code></dt>
<dd><p>The task is terminated, in the sense of ARM 9.3 (5).  Any dependents
that were waiting on terminate alternatives have been awakened and have
terminated themselves.
</p>
</dd>
<dt><code class="code">Child Activation Wait</code></dt>
<dd><p>The task is waiting for created tasks to complete activation.
</p>
</dd>
<dt><code class="code">Accept or Select Term</code></dt>
<dd><p>The task is waiting on an accept or selective wait statement.
</p>
</dd>
<dt><code class="code">Waiting on entry call</code></dt>
<dd><p>The task is waiting on an entry call.
</p>
</dd>
<dt><code class="code">Async Select Wait</code></dt>
<dd><p>The task is waiting to start the abortable part of an asynchronous
select statement.
</p>
</dd>
<dt><code class="code">Delay Sleep</code></dt>
<dd><p>The task is waiting on a select statement with only a delay
alternative open.
</p>
</dd>
<dt><code class="code">Child Termination Wait</code></dt>
<dd><p>The task is sleeping having completed a master within itself, and is
waiting for the tasks dependent on that master to become terminated or
waiting on a terminate Phase.
</p>
</dd>
<dt><code class="code">Wait Child in Term Alt</code></dt>
<dd><p>The task is sleeping waiting for tasks on terminate alternatives to
finish terminating.
</p>
</dd>
<dt><code class="code">Asynchronous Hold</code></dt>
<dd><p>The task has been held by <code class="code">Ada.Asynchronous_Task_Control.Hold_Task</code>.
</p>
</dd>
<dt><code class="code">Activating</code></dt>
<dd><p>The task has been created and is being made runnable.
</p>
</dd>
<dt><code class="code">Selective Wait</code></dt>
<dd><p>The task is waiting in a selective wait statement.
</p>
</dd>
<dt><code class="code">Accepting RV with <var class="var">taskno</var></code></dt>
<dd><p>The task is accepting a rendez-vous with the task <var class="var">taskno</var>.
</p>
</dd>
<dt><code class="code">Waiting on RV with <var class="var">taskno</var></code></dt>
<dd><p>The task is waiting for a rendez-vous with the task <var class="var">taskno</var>.
</p></dd>
</dl>

</dd>
<dt>Name</dt>
<dd><p>Name of the task in the program.
</p>
</dd>
</dl>

</dd>
<dt><a id="index-info-task-taskno"></a><span><code class="code">info task <var class="var">taskno</var></code><a class="copiable-link" href="#index-info-task-taskno"> &para;</a></span></dt>
<dd><p>This command shows detailed information on the specified task, as in
the following example:
</p><div class="example smallexample">
<pre class="example-preformatted">(gdb) info tasks
  ID       TID P-ID Pri State                  Name
   1   8077880    0  15 Child Activation Wait  main_task
*  2   807c468    1  15 Runnable               task_1
(gdb) info task 2
Ada Task: 0x807c468
Name: &quot;task_1&quot;
Thread: 0
LWP: 0x1fac
Parent: 1 (&quot;main_task&quot;)
Base Priority: 15
State: Runnable
</pre></div>

</dd>
<dt><a class="index-entry-id" id="index-current-Ada-task-ID"></a>
<a id="index-task-_0028Ada_0029"></a><span><code class="code">task</code><a class="copiable-link" href="#index-task-_0028Ada_0029"> &para;</a></span></dt>
<dd><p>This command prints the ID and name of the current task.
</p>
<div class="example smallexample">
<pre class="example-preformatted">(gdb) info tasks
  ID       TID P-ID Pri State                  Name
   1   8077870    0  15 Child Activation Wait  main_task
*  2   807c458    1  15 Runnable               some_task
(gdb) task
[Current task is 2 &quot;some_task&quot;]
</pre></div>

</dd>
<dt><a id="index-Ada-task-switching"></a><span><code class="code">task <var class="var">taskno</var></code><a class="copiable-link" href="#index-Ada-task-switching"> &para;</a></span></dt>
<dd><p>This command is like the <code class="code">thread <var class="var">thread-id</var></code>
command (see <a class="pxref" href="Threads.html">Debugging Programs with Multiple Threads</a>).  It switches the context of debugging
from the current task to the given task.
</p>
<div class="example smallexample">
<pre class="example-preformatted">(gdb) info tasks
  ID       TID P-ID Pri State                  Name
   1   8077870    0  15 Child Activation Wait  main_task
*  2   807c458    1  15 Runnable               some_task
(gdb) task 1
[Switching to task 1 &quot;main_task&quot;]
#0  0x8067726 in pthread_cond_wait ()
(gdb) bt
#0  0x8067726 in pthread_cond_wait ()
#1  0x8056714 in system.os_interface.pthread_cond_wait ()
#2  0x805cb63 in system.task_primitives.operations.sleep ()
#3  0x806153e in system.tasking.stages.activate_tasks ()
#4  0x804aacc in un () at un.adb:5
</pre></div>

</dd>
<dt><code class="code">task apply [<var class="var">task-id-list</var> | all] [<var class="var">flag</var>]&hellip; <var class="var">command</var></code></dt>
<dd><p>The <code class="code">task apply</code> command is the Ada tasking analogue of
<code class="code">thread apply</code> (see <a class="pxref" href="Threads.html">Debugging Programs with Multiple Threads</a>).  It allows you to apply the
named <var class="var">command</var> to one or more tasks.  Specify the tasks that you
want affected using a list of task IDs, or specify <code class="code">all</code> to apply
to all tasks.
</p>
<p>The <var class="var">flag</var> arguments control what output to produce and how to
handle errors raised when applying <var class="var">command</var> to a task.
<var class="var">flag</var> must start with a <code class="code">-</code> directly followed by one letter
in <code class="code">qcs</code>.  If several flags are provided, they must be given
individually, such as <code class="code">-c -q</code>.
</p>
<p>By default, <small class="sc">GDB</small> displays some task information before the
output produced by <var class="var">command</var>, and an error raised during the
execution of a <var class="var">command</var> will abort <code class="code">task apply</code>.  The
following flags can be used to fine-tune this behavior:
</p>
<dl class="table">
<dt><code class="code">-c</code></dt>
<dd><p>The flag <code class="code">-c</code>, which stands for &lsquo;<samp class="samp">continue</samp>&rsquo;, causes any
errors in <var class="var">command</var> to be displayed, and the execution of
<code class="code">task apply</code> then continues.
</p></dd>
<dt><code class="code">-s</code></dt>
<dd><p>The flag <code class="code">-s</code>, which stands for &lsquo;<samp class="samp">silent</samp>&rsquo;, causes any errors
or empty output produced by a <var class="var">command</var> to be silently ignored.
That is, the execution continues, but the task information and errors
are not printed.
</p></dd>
<dt><code class="code">-q</code></dt>
<dd><p>The flag <code class="code">-q</code> (&lsquo;<samp class="samp">quiet</samp>&rsquo;) disables printing the task
information.
</p></dd>
</dl>

<p>Flags <code class="code">-c</code> and <code class="code">-s</code> cannot be used together.
</p>
</dd>
<dt><a class="index-entry-id" id="index-task-breakpoints_002c-in-Ada"></a>
<a class="index-entry-id" id="index-break-_2026-task-taskno-_0028Ada_0029"></a>
<a id="index-breakpoints-and-tasks_002c-in-Ada"></a><span><code class="code">break <var class="var">locspec</var> task <var class="var">taskno</var></code><a class="copiable-link" href="#index-breakpoints-and-tasks_002c-in-Ada"> &para;</a></span></dt>
<dt><code class="code">break <var class="var">locspec</var> task <var class="var">taskno</var> if &hellip;</code></dt>
<dd><p>These commands are like the <code class="code">break &hellip; thread &hellip;</code>
command (see <a class="pxref" href="Thread-Stops.html">Stopping and Starting Multi-thread Programs</a>).  See <a class="xref" href="Location-Specifications.html">Location Specifications</a>, for
the various forms of <var class="var">locspec</var>.
</p>
<p>Use the qualifier &lsquo;<samp class="samp">task <var class="var">taskno</var></samp>&rsquo; with a breakpoint command
to specify that you only want <small class="sc">GDB</small> to stop the program when a
particular Ada task reaches this breakpoint.  The <var class="var">taskno</var> is one of the
numeric task identifiers assigned by <small class="sc">GDB</small>, shown in the first
column of the &lsquo;<samp class="samp">info tasks</samp>&rsquo; display.
</p>
<p>If you do not specify &lsquo;<samp class="samp">task <var class="var">taskno</var></samp>&rsquo; when you set a
breakpoint, the breakpoint applies to <em class="emph">all</em> tasks of your
program.
</p>
<p>You can use the <code class="code">task</code> qualifier on conditional breakpoints as
well; in this case, place &lsquo;<samp class="samp">task <var class="var">taskno</var></samp>&rsquo; before the
breakpoint condition (before the <code class="code">if</code>).
</p>
<p>For example,
</p>
<div class="example smallexample">
<pre class="example-preformatted">(gdb) info tasks
  ID       TID P-ID Pri State                 Name
   1 140022020   0   15 Child Activation Wait main_task
   2 140045060   1   15 Accept/Select Wait    t2
   3 140044840   1   15 Runnable              t1
*  4 140056040   1   15 Runnable              t3
(gdb) b 15 task 2
Breakpoint 5 at 0x120044cb0: file test_task_debug.adb, line 15.
(gdb) cont
Continuing.
task # 1 running
task # 2 running

Breakpoint 5, test_task_debug () at test_task_debug.adb:15
15               flush;
(gdb) info tasks
  ID       TID P-ID Pri State                 Name
   1 140022020   0   15 Child Activation Wait main_task
*  2 140045060   1   15 Runnable              t2
   3 140044840   1   15 Runnable              t1
   4 140056040   1   15 Delay Sleep           t3
</pre></div>
</dd>
</dl>

</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Ada-Tasks-and-Core-Files.html">Tasking Support when Debugging Core Files</a>, Previous: <a href="Ada-Exceptions.html">Ada Exceptions</a>, Up: <a href="Ada.html">Ada</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Concept-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
