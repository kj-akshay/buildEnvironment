<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- Copyright Â© 1988-2024 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "Free Software" and "Free Software Needs
Free Documentation", with the Front-Cover Texts being "A GNU Manual,"
and with the Back-Cover Texts as in (a) below.

(a) The FSF's Back-Cover Text is: "You are free to copy and modify
this GNU Manual.  Buying copies from GNU Press supports the FSF in
developing GNU and promoting software freedom." -->
<title>Overview (Debugging with GDB)</title>

<meta name="description" content="Overview (Debugging with GDB)">
<meta name="keywords" content="Overview (Debugging with GDB)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Concept-Index.html" rel="index" title="Concept Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Remote-Protocol.html" rel="up" title="Remote Protocol">
<link href="Standard-Replies.html" rel="next" title="Standard Replies">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
span.r {font-family: initial; font-weight: normal; font-style: normal}
span:hover a.copiable-link {visibility: visible}
-->
</style>


</head>

<body lang="en">
<div class="section-level-extent" id="Overview">
<div class="nav-panel">
<p>
Next: <a href="Standard-Replies.html" accesskey="n" rel="next">Standard Replies</a>, Up: <a href="Remote-Protocol.html" accesskey="u" rel="up"><small class="sc">GDB</small> Remote Serial Protocol</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Concept-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h3 class="section" id="Overview-1"><span>E.1 Overview<a class="copiable-link" href="#Overview-1"> &para;</a></span></h3>

<p>There may be occasions when you need to know something about the
protocol&mdash;for example, if there is only one serial port to your target
machine, you might want your program to do something special if it
recognizes a packet meant for <small class="sc">GDB</small>.
</p>
<p>In the examples below, &lsquo;<samp class="samp">-&gt;</samp>&rsquo; and &lsquo;<samp class="samp">&lt;-</samp>&rsquo; are used to indicate
transmitted and received data, respectively.
</p>
<a class="index-entry-id" id="index-protocol_002c-gdb-remote-serial"></a>
<a class="index-entry-id" id="index-serial-protocol_002c-gdb-remote"></a>
<a class="index-entry-id" id="index-remote-serial-protocol"></a>
<p>All <small class="sc">GDB</small> commands and responses (other than acknowledgments
and notifications, see <a class="ref" href="Notification-Packets.html">Notification Packets</a>) are sent as a
<var class="var">packet</var>.  A <var class="var">packet</var> is introduced with the character
&lsquo;<samp class="samp">$</samp>&rsquo;, the actual <var class="var">packet-data</var>, and the terminating character
&lsquo;<samp class="samp">#</samp>&rsquo; followed by a two-digit <var class="var">checksum</var>:
</p>
<div class="example smallexample">
<pre class="example-preformatted"><code class="code">$</code><var class="var">packet-data</var><code class="code">#</code><var class="var">checksum</var>
</pre></div>

<a class="index-entry-id" id="index-checksum_002c-for-gdb-remote"></a>
<p>The two-digit <var class="var">checksum</var> is computed as the modulo 256 sum of all
characters between the leading &lsquo;<samp class="samp">$</samp>&rsquo; and the trailing &lsquo;<samp class="samp">#</samp>&rsquo; (an
eight bit unsigned checksum).
</p>
<p>Implementors should note that prior to <small class="sc">GDB</small> 5.0 the protocol
specification also included an optional two-digit <var class="var">sequence-id</var>:
</p>
<div class="example smallexample">
<pre class="example-preformatted"><code class="code">$</code><var class="var">sequence-id</var><code class="code">:</code><var class="var">packet-data</var><code class="code">#</code><var class="var">checksum</var>
</pre></div>

<a class="index-entry-id" id="index-sequence_002did_002c-for-gdb-remote"></a>
<p>That <var class="var">sequence-id</var> was appended to the acknowledgment.  <small class="sc">GDB</small>
has never output <var class="var">sequence-id</var>s.  Stubs that handle packets added
since <small class="sc">GDB</small> 5.0 must not accept <var class="var">sequence-id</var>.
</p>
<p>When either the host or the target machine receives a packet, the first
response expected is an acknowledgment: either &lsquo;<samp class="samp">+</samp>&rsquo; (to indicate
the package was received correctly) or &lsquo;<samp class="samp">-</samp>&rsquo; (to request
retransmission):
</p>
<div class="example smallexample">
<pre class="example-preformatted">-&gt; <code class="code">$</code><var class="var">packet-data</var><code class="code">#</code><var class="var">checksum</var>
&lt;- <code class="code">+</code>
</pre></div>

<p>The &lsquo;<samp class="samp">+</samp>&rsquo;/&lsquo;<samp class="samp">-</samp>&rsquo; acknowledgments can be disabled
once a connection is established.
See <a class="xref" href="Packet-Acknowledgment.html">Packet Acknowledgment</a>, for details.
</p>
<p>The host (<small class="sc">GDB</small>) sends <var class="var">command</var>s, and the target (the
debugging stub incorporated in your program) sends a <var class="var">response</var>.  In
the case of step and continue <var class="var">command</var>s, the response is only sent
when the operation has completed, and the target has again stopped all
threads in all attached processes.  This is the default all-stop mode
behavior, but the remote protocol also supports <small class="sc">GDB</small>&rsquo;s non-stop 
execution mode; see <a class="ref" href="Remote-Non_002dStop.html">Remote Protocol Support for Non-Stop Mode</a>, for details.
</p>
<p><var class="var">packet-data</var> consists of a sequence of characters with the
exception of &lsquo;<samp class="samp">#</samp>&rsquo; and &lsquo;<samp class="samp">$</samp>&rsquo; (see &lsquo;<samp class="samp">X</samp>&rsquo; packet for additional
exceptions).
</p>
<a class="index-entry-id" id="index-remote-protocol_002c-field-separator"></a>
<p>Fields within the packet should be separated using &lsquo;<samp class="samp">,</samp>&rsquo; &lsquo;<samp class="samp">;</samp>&rsquo; or
&lsquo;<samp class="samp">:</samp>&rsquo;.  Except where otherwise noted all numbers are represented in
<small class="sc">HEX</small> with leading zeros suppressed.
</p>
<p>Implementors should note that prior to <small class="sc">GDB</small> 5.0, the character
&lsquo;<samp class="samp">:</samp>&rsquo; could not appear as the third character in a packet (as it
would potentially conflict with the <var class="var">sequence-id</var>).
</p>
<a class="index-entry-id" id="index-remote-protocol_002c-binary-data"></a>
<a class="anchor" id="Binary-Data"></a><p>Binary data in most packets is encoded as two hexadecimal
digits per byte of binary data.  This allowed the traditional remote
protocol to work over connections which were only seven-bit clean.
Some packets designed more recently assume an eight-bit clean
connection, and use a more efficient encoding to send and receive
binary data.
</p>
<p>The binary data representation uses <code class="code">7d</code> (<small class="sc">ASCII</small> &lsquo;<samp class="samp">}</samp>&rsquo;)
as an escape character.  Any escaped byte is transmitted as the escape
character followed by the original character XORed with <code class="code">0x20</code>.
For example, the byte <code class="code">0x7d</code> would be transmitted as the two
bytes <code class="code">0x7d 0x5d</code>.  The bytes <code class="code">0x23</code> (<small class="sc">ASCII</small> &lsquo;<samp class="samp">#</samp>&rsquo;),
<code class="code">0x24</code> (<small class="sc">ASCII</small> &lsquo;<samp class="samp">$</samp>&rsquo;), and <code class="code">0x7d</code> (<small class="sc">ASCII</small>
&lsquo;<samp class="samp">}</samp>&rsquo;) must always be escaped.  Responses sent by the stub
must also escape <code class="code">0x2a</code> (<small class="sc">ASCII</small> &lsquo;<samp class="samp">*</samp>&rsquo;), so that it
is not interpreted as the start of a run-length encoded sequence
(described next).
</p>
<p>Response <var class="var">data</var> can be run-length encoded to save space.
Run-length encoding replaces runs of identical characters with one
instance of the repeated character, followed by a &lsquo;<samp class="samp">*</samp>&rsquo; and a
repeat count.  The repeat count is itself sent encoded, to avoid
binary characters in <var class="var">data</var>: a value of <var class="var">n</var> is sent as
<code class="code"><var class="var">n</var>+29</code>.  For a repeat count greater or equal to 3, this
produces a printable <small class="sc">ASCII</small> character, e.g. a space (<small class="sc">ASCII</small>
code 32) for a repeat count of 3.  (This is because run-length
encoding starts to win for counts 3 or more.)  Thus, for example,
&lsquo;<samp class="samp">0* </samp>&rsquo; is a run-length encoding of &ldquo;0000&rdquo;: the space character
after &lsquo;<samp class="samp">*</samp>&rsquo; means repeat the leading <code class="code">0</code> <code class="code">32&nbsp;-&nbsp;29&nbsp;=&nbsp;3</code><!-- /@w --> more times.
</p>
<p>The printable characters &lsquo;<samp class="samp">#</samp>&rsquo; and &lsquo;<samp class="samp">$</samp>&rsquo; or with a numeric value
greater than 126 must not be used.  Runs of six repeats (&lsquo;<samp class="samp">#</samp>&rsquo;) or
seven repeats (&lsquo;<samp class="samp">$</samp>&rsquo;) can be expanded using a repeat count of only
five (&lsquo;<samp class="samp">&quot;</samp>&rsquo;).  For example, &lsquo;<samp class="samp">00000000</samp>&rsquo; can be encoded as
&lsquo;<samp class="samp">0*&quot;00</samp>&rsquo;.
</p>
<p>See <a class="xref" href="Standard-Replies.html">Standard Replies</a> for standard error responses, and how to
respond indicating a command is not supported.
</p>
<p>In describing packets (commands and responses), each description has a
template showing the overall syntax, followed by an explanation of the
packet&rsquo;s meaning.  We include spaces in some of the templates for
clarity; these are not part of the packet&rsquo;s syntax.  No <small class="sc">GDB</small>
packet uses spaces to separate its components.  For example, a
template like &lsquo;<samp class="samp">foo <var class="var">bar</var> <var class="var">baz</var></samp>&rsquo; describes a packet
beginning with the three ASCII bytes &lsquo;<samp class="samp">foo</samp>&rsquo;, followed by a
<var class="var">bar</var>, followed directly by a <var class="var">baz</var>.  <small class="sc">GDB</small> does not
transmit a space character between the &lsquo;<samp class="samp">foo</samp>&rsquo; and the <var class="var">bar</var>,
or between the <var class="var">bar</var> and the <var class="var">baz</var>.
</p>
<p>We place optional portions of a packet in [square brackets];
for example, a template like &lsquo;<samp class="samp">c <span class="r">[</span><var class="var">addr</var><span class="r">]</span></samp>&rsquo; describes a
packet beginning with the single ASCII character &lsquo;<samp class="samp">c</samp>&rsquo;, possibly
followed by an <var class="var">addr</var>.
</p>
<p>At a minimum, a stub is required to support the &lsquo;<samp class="samp">?</samp>&rsquo; command to
tell <small class="sc">GDB</small> the reason for halting, &lsquo;<samp class="samp">g</samp>&rsquo; and &lsquo;<samp class="samp">G</samp>&rsquo;
commands for register access, and the &lsquo;<samp class="samp">m</samp>&rsquo; and &lsquo;<samp class="samp">M</samp>&rsquo; commands
for memory access.  Stubs that only control single-threaded targets
can implement run control with the &lsquo;<samp class="samp">c</samp>&rsquo; (continue) command, and if
the target architecture supports hardware-assisted single-stepping,
the &lsquo;<samp class="samp">s</samp>&rsquo; (step) command.  Stubs that support multi-threading
targets should support the &lsquo;<samp class="samp">vCont</samp>&rsquo; command.  All other commands
are optional.
</p>
</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Standard-Replies.html">Standard Replies</a>, Up: <a href="Remote-Protocol.html"><small class="sc">GDB</small> Remote Serial Protocol</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Concept-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
